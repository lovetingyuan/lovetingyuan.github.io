## http2

http2 是 http1.1 之后的重大版本更新

- 二进制分帧

  http2 的请求和响应都是由一个或多个帧组成的

  帧有不同的类型，有 header 帧，data 帧以及其余 8 种控制帧

  每个帧都有一个 id，来标识自己属于哪个流

- 多路复用

  不同的请求和响应可以在同一个 tcp 连接上按照随意的顺序发送和接收 <br>
  一个请求和其响应的帧组成一条数据流，一个 tcp 连接上可以有多条数据流乱序并行发送 <br>
  流是个逻辑概念，每个流有 id 标识，每个帧也都保存了所属的流 id，也就是拥有同样流 id 的帧组成了一条数据流 <br>
  虽然流可以乱序发送，但是流内的帧必须是有序的

  ![](/images/http2-stream-frame.png)

- 服务端推送
  http2 默认不开启这个特性，需要在服务端配置，一般只对新用户首次访问时启用
- 首部压缩
  双方会维护一个首部表，用数字索引来代替常用的 header，另外用哈夫曼编码来压缩字符串

  ![](/images/http2-header-compress.png)
