const e=`<h3>Vue \u7684\u54CD\u5E94\u5F0F\u539F\u7406</h3>
<p>Vue \u7684\u54CD\u5E94\u5F0F\u5B9E\u73B0\u5728<code>src/core/observer</code>\u4E0B\u9762</p>
<p>\u54CD\u5E94\u5F0F\u7684\u5EFA\u7ACB\u4F9D\u9760\u7684\u662F<code>Observer</code>, <code>Dep</code>, <code>Watcher</code>\u4EE5\u53CA\u8BA2\u9605\u53D1\u5E03\u6A21\u5F0F\uFF0C\u5176\u4E2D<code>Observer</code>\u901A\u8FC7<code>getter/setter</code>\u5B9E\u73B0\u4E86\u6570\u636E\u7684\u62E6\u622A\uFF0C
<code>Dep</code>\u4F5C\u4E3A publisher\uFF0C<code>Watcher</code>\u4F5C\u4E3A subscriber</p>
<p>Vue \u7684\u6BCF\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5305\u62EC\u6570\u7EC4\u90FD\u6709<code>__ob__</code>\u7684\u5C5E\u6027\uFF0C\u8FD9\u5C31\u662F<code>Observer</code></p>
<h3>Observer</h3>
<p><code>Observer</code>\u5B9E\u9645\u4E0A\u5C31\u662F\u5BF9\u5BF9\u8C61\u548C\u6570\u7EC4\u8FDB\u884C\u54CD\u5E94\u5F0F\u4EE3\u7406</p>
<ul>
<li>\u5BF9\u4E8E\u5BF9\u8C61\u5C31\u5BF9\u6BCF\u4E2A\u5C5E\u6027\u8C03\u7528<code>defineReactive</code>\u6267\u884C\u5B9E\u9645\u7684 getter/setter \u52AB\u6301</li>
<li>\u5BF9\u4E8E\u6570\u7EC4\uFF0CVue \u4F1A\u66F4\u6539\u6570\u7EC4\u7684<code>__proto__</code>\u6307\u5411\u4EE5\u5B9E\u73B0\u5BF9\u65B9\u6CD5\u7684\u8986\u76D6\uFF0C\u5E76\u4F9D\u6B21\u4EE3\u7406\u6570\u7EC4\u9879\u4E2D\u7684\u5BF9\u8C61\u548C\u6570\u7EC4</li>
<li>\u751F\u6210\u7684<code>Observer</code>\u5BF9\u8C61\u4F1A\u88AB\u6302\u8F7D\u5230\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684<code>__ob__</code>\u5C5E\u6027\u4E0A</li>
<li>\u6BCF\u4E2A<code>Observer</code>\u5BF9\u8C61\u90FD\u4F1A\u6709\u4E00\u4E2A<code>Dep</code>\u5BF9\u8C61\uFF0C\u7528\u6765\u4FDD\u5B58\u4F9D\u8D56\u4E8E\u81EA\u5DF1\u7684\u4E00\u7CFB\u5217<code>Watcher</code></li>
</ul>
<h3>Dep</h3>
<p><code>Dep</code>\u5C31\u662F\u53D1\u5E03\u53D8\u5316\u7684\u5BF9\u8C61\uFF0C\u5B83\u6709\u4E00\u4E2A id \u6807\u8BC6\u5E76\u4E14\u7EF4\u62A4\u4E00\u4E2A<code>Watcher</code>\u5217\u8868<code>subs</code></p>
<ul>
<li>\u53EF\u4EE5\u6DFB\u52A0\u6216\u8005\u5220\u9664\u67D0\u4E2A<code>Watcher</code></li>
<li>\u53EF\u4EE5\u901A\u77E5\u6240\u6709\u7684<code>Watcher</code>\u6267\u884C\u81EA\u5DF1\u5BF9\u5E94\u7684<code>update</code>\u65B9\u6CD5</li>
</ul>
<h3>defineReactive</h3>
<p><code>defineReactive</code>\u6BCF\u6B21\u8C03\u7528\u90FD\u4F1A\u751F\u6210\u4E00\u4E2A<code>Dep</code>\u5BF9\u8C61\uFF0C\u8868\u793A\u5F53\u524D\u5C5E\u6027\u53EF\u80FD\u4F5C\u4E3A\u7684\u4F9D\u8D56</p>
<ul>
<li>\u5F53 getter \u88AB\u52AB\u6301\u540E\uFF0C\u6BCF\u5F53\u53D6\u6570\u636E\u7684\u65F6\u5019\uFF0C<code>Dep</code>\u5BF9\u8C61\u5C31\u4F1A\u4ECE\u67D0\u4E2A\u5730\u65B9(<code>Dep.target</code>)\u628A\u6570\u636E\u7D22\u53D6\u65B9(<code>Watcher</code>)\u52A0\u5165\u5230\u81EA\u5DF1\u7684<code>subs</code>\u5217\u8868\u4E2D</li>
<li>\u5982\u679C\u5F53\u524D\u7684\u5C5E\u6027\u4E5F\u662F\u4E2A\u5BF9\u8C61\uFF0C\u90A3\u4E48\u4F1A observe \u8FD9\u4E2A\u5BF9\u8C61\uFF0C\u751F\u6210<code>ChildOb</code>\uFF0C\u540C\u65F6\u4E5F\u4F1A\u5C06\u5F53\u524D\u7684<code>Watcher</code>\u52A0\u5165\u5230<code>ChildOb</code>\u7684<code>subs</code>\u4E2D</li>
<li>\u52AB\u6301 setter \u540E\uFF0C\u5F53\u65B0\u7684\u503C\u8FC7\u6765\u65F6\uFF0C\u6267\u884C<code>Dep</code>\u5BF9\u8C61\u7684 notify\uFF0C\u901A\u77E5<code>Watcher</code>\u66F4\u65B0\uFF0C\u8C03\u7528<code>update</code>\u65B9\u6CD5</li>
<li>\u5982\u679C set \u7684\u503C\u662F\u5BF9\u8C61\u6216\u8005\u6570\u7EC4\u4F1A\u5BF9\u5B83\u6267\u884C observe \u64CD\u4F5C\uFF0C\u751F\u6210\u65B0\u7684<code>ChildOb</code>\u5E76\u66F4\u65B0\u95ED\u5305\u4E2D\u65E7\u7684<code>ChildOb</code></li>
<li>\u4E0A\u9762\u63D0\u5230\u7684<code>Dep</code>\u548C<code>ChildOb</code>\u90FD\u662F\u5904\u4E8E getter/setter \u76F8\u5BF9\u4E8E defineReactive \u7684\u95ED\u5305\u91CC\u7684</li>
</ul>
<h3>Watcher</h3>
<p><code>Watcher</code>\u662F\u6570\u636E\u7684\u8BA2\u9605\u65B9\uFF0C\u6765\u6E90\u6709\u4E09\u4E2A\u5730\u65B9\uFF1Arender, computed, watch($watch)\uFF0C\u76F8\u5E94\u7684 watcher \u4E5F\u5C31\u5206\u6210\u4E09\u79CD\uFF0C<code>Watcher</code>\u5BF9\u8C61\u5305\u542B\u4EE5\u4E0B\u4E3B\u8981\u7684\u5185\u5BB9\uFF1A</p>
<ul>
<li>vm \u7EC4\u4EF6\u5B9E\u4F8B\u5BF9\u8C61</li>
<li>expression \u83B7\u53D6\u6570\u636E\u7684\u65B9\u6CD5\uFF0C\u5982 computed \u7684\u56DE\u8C03\uFF0Cwatch \u7684\u8868\u8FBE\u5F0F\u6216\u8005\u65B9\u6CD5\uFF0C\u66F4\u65B0\u89C6\u56FE\u7684\u65B9\u6CD5</li>
<li>cb \u53D8\u5316\u65F6\u7684\u56DE\u8C03\u65B9\u6CD5\uFF0C\u5BF9\u4E8E watch \u6765\u8BB2\u5B83\u662F\u6709\u56DE\u8C03\u7684</li>
<li>deps,depIds,newDeps,newDepIds \u8BA2\u9605\u7684<code>Dep</code>\u5217\u8868\uFF0C\u56E0\u4E3A\u4F9D\u8D56\u4F1A\u6839\u636E\u8BA1\u7B97\u66F4\u65B0\uFF0C\u6240\u4EE5\u6BCF\u6B21\u90FD\u8981\u66F4\u65B0\u65B0\u7684\u4F9D\u8D56\u5217\u8868\uFF0Cid \u7528\u6765\u907F\u514D\u81EA\u5DF1\u88AB\u91CD\u590D\u52A0\u5230<code>Dep</code>\u4E2D\u53BB</li>
<li>deep, lazy, sync, dirty, active</li>
<li>getter \u83B7\u53D6\u6570\u636E\u7684\u65B9\u6CD5\uFF0C\u5C31\u662F\u4E0A\u9762\u7684 expression</li>
<li>value \u5F53\u524D\u7684\u503C\uFF0C\u7528\u4E8E watch \u65B9\u6CD5</li>
</ul>
<p><code>Watcher</code>\u4F1A\u63D0\u4F9B<code>update</code>\u65B9\u6CD5\uFF0C\u4E5F\u5C31\u662F\u5F53\u6570\u636E\u53D8\u5316\u65F6\u4F1A\u88AB\u8C03\u7528\uFF0C\u6709\u4E09\u79CD\u60C5\u51B5\uFF1A</p>
<ul>
<li>\u5BF9\u4E8E computed-watcher \u6765\u8BB2\uFF0C\u662F\u88AB\u52A8\u89E6\u53D1\u7684\u8FC7\u7A0B\uFF0C\u5F53\u8BBF\u95EE\u5230 computed \u5C5E\u6027\u624D\u4F1A\u8BA1\u7B97\uFF0C\u90A3\u5F53 computed \u4F9D\u8D56\u7684\u5C5E\u6027\u53D1\u751F\u4E86\u53D8\u5316\uFF0Ccomputed-watcher \u4F1A\u5728 computed-getter \u90A3\u91CC\u6807\u8BB0\u6570\u636E\u5DF2\u7ECF\u53D8\u810F\uFF0C\u8FD9\u6837 computed \u5C31\u4F1A\u91CD\u65B0\u8BA1\u7B97\u800C\u4E0D\u4F1A\u4F7F\u7528\u7F13\u5B58\u503C\u4E86</li>
<li>\u5BF9\u4E8E render-watcher \u6765\u8BB2\uFF0C\u6E32\u67D3\u662F\u5F02\u6B65\u7684\uFF0C\u8FD9\u65F6<code>Watcher</code>\u4F1A\u88AB\u52A0\u5165\u5230\u5168\u5C40\u7684\u5F85\u6267\u884C\u7684 watcher \u5217\u8868\u4E2D\uFF0C\u7B49\u5F85\u6E32\u67D3\u8C03\u5EA6<code>nextTick</code>\u6267\u884C\uFF0C\u6267\u884C\u7684\u65F6\u5019\u4F1A\u8C03\u7528<code>getter</code>\u65B9\u6CD5\u4E5F\u5C31\u66F4\u65B0\u4E86\u7EC4\u4EF6\u7684\u89C6\u56FE</li>
<li>\u5BF9\u4E8E\u540C\u6B65\u7684 watcher \u6765\u8BB2\u4F1A\u76F4\u63A5\u8C03\u7528<code>getter</code>\u83B7\u53D6\u65B0\u7684 value\uFF0C\u5728\u8C03\u7528 getter \u671F\u95F4\uFF0C\u5F53\u524D\u7684<code>Watcher</code>\u4F1A\u88AB\u63A8\u5165\u4E00\u4E2A\u5168\u5C40\u7684\u6808\u5185\uFF0C\u5E76\u4E14\u66F4\u65B0\u5230<code>Dep.target</code>\uFF0C\u6267\u884C\u7684\u671F\u95F4\u4F1A\u89E6\u53D1\u6570\u636E\u7684 getter \u52AB\u6301\uFF0C<code>Dep</code>\u5C31\u4F1A\u5F97\u5230\u8BA2\u9605\u3002\u6267\u884C\u5B8C\u4E4B\u540E\u51FA\u6808\u5E76\u66F4\u65B0\u65B0\u7684<code>deps</code>\u5217\u8868</li>
</ul>
<p><img src="https://cn.vuejs.org/images/data.png" alt="alt"></p>
<ul>
<li>
<p>Dep</p>
<ul>
<li><code>Dep.target</code></li>
<li><code>id</code></li>
<li><code>subs</code> watchers \u5217\u8868</li>
<li><code>depend</code> <code>Dep.target.addDep(this)</code> \u5C06\u81EA\u8EAB(dep) \u52A0\u5165\u5230 <code>Dep.target</code>\u7684 deps \u4E2D\uFF0C\u5E76\u4E14 watcher \u4E5F\u4F1A\u52A0\u5165\u5230 dep \u7684 subs \u4E2D</li>
<li><code>notify()</code> \u8C03\u7528 watchers \u7684<code>update</code>\u65B9\u6CD5</li>
</ul>
</li>
<li>
<p>Observer</p>
<ul>
<li><code>value</code></li>
<li><code>dep</code></li>
<li>\u5982\u679C\u503C\u662F\u6570\u7EC4\uFF0C\u90A3\u4E48\u8986\u5199\u539F\u578B\u65B9\u6CD5\uFF0C\u7136\u540E\u5BF9\u6BCF\u4E2A\u503C\u9012\u5F52 <code>new Observer(value)</code></li>
<li>\u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u5BF9\u6BCF\u4E2A value \u90FD\u8C03\u7528 <code>defineReactive</code>\uFF0C\u6BCF\u4E2A\u5BF9\u8C61\u6216\u6570\u7EC4\u90FD\u4F1A\u6302\u8F7D\u4E0A<code>__ob__</code>\u5C5E\u6027
<ul>
<li>\u521B\u5EFA <code>dep</code> \u5BF9\u8C61\uFF0C\u5B58\u5728\u5728\u95ED\u5305\u4E2D</li>
<li><code>getter</code> \u65F6\u8C03\u7528 <code>dep.depend()</code> \u5C06 dep \u52A0\u5165 <code>Dep.target</code> \u7684 deps \u4E2D\uFF08\u5305\u62EC\u5B50\u5BF9\u8C61\u7684 observer \u7684 dep\uFF09</li>
<li><code>setter</code> \u5BF9 set \u7684\u503C\u8FDB\u884C observe\uFF0C\u8C03\u7528 dep \u7684<code>notify()</code></li>
<li>\u5BF9\u4E8E\u5B50\u5BF9\u8C61\u4F1A\u9012\u5F52\u8C03\u7528 <code>new Observer(value)</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Watcher</p>
<ul>
<li><code>vm</code></li>
<li><code>deps</code>, <code>newDeps</code></li>
<li><code>cb</code></li>
<li><code>value</code></li>
<li><code>addDep</code> \u628A dep \u52A0\u5165\u5230 deps\uFF08\u540C\u65F6\u4E5F\u4F1A\u628A\u81EA\u8EAB\u52A0\u5165\u5230 dep \u7684 subs \u4E2D\uFF09</li>
<li><code>update</code>
<ul>
<li>\u5982\u679C\u662F lazy\uFF0C\u5219\u6807\u8BB0\u4E3A dirty</li>
<li>\u5426\u5219\u5C06\u5F53\u524D watcher \u63A8\u5165\u5230\u4EFB\u52A1\u961F\u5217</li>
</ul>
</li>
<li><code>run</code> \u8C03\u7528 <code>get</code> \u5F97\u5230\u65B0\u7684\u503C\uFF0C\u8C03\u7528 <code>cb</code> \u56DE\u8C03</li>
<li><code>get</code>\uFF0C\u5C06\u81EA\u8EAB\u5199\u5165<code>Dep.target</code>\uFF0C\u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u4F1A\u628A\u8FD9\u4E2A\u5BF9\u8C61\u7684\u6240\u6709\u5C5E\u6027\u90FD\u8BFB\u4E00\u904D\uFF0C<br>
\u4E4B\u540E\u64A4\u9500\u5199\u5165<code>Dep.target</code>\uFF0C\u7C7B\u4F3C\u4E8E\u56DE\u6EAF\uFF0C\u7136\u540E\u4F1A\u628A\u91CD\u65B0\u6536\u96C6\u5230\u7684\u4F9D\u8D56 <code>newDeps</code> \u8986\u5199\u5230 <code>deps</code></li>
<li><code>depend</code> \u8C03\u7528\u6240\u6709 deps \u7684 depend \u65B9\u6CD5</li>
</ul>
</li>
</ul>
`;export{e as default};
