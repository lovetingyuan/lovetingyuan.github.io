import{_ as w,h as E}from"./index-0087e866.js";function R(c={}){const{immediate:g=!1,onNeedRefresh:o,onOfflineReady:n,onRegistered:l,onRegisteredSW:r,onRegisterError:d}=c;let e,f,a;const p=async(u=!0)=>{await f,await(a==null?void 0:a())};async function v(){if("serviceWorker"in navigator){const{Workbox:u}=await w(()=>import("./workbox-window.prod.es5-295a6886.js"),[]);e=new u("/sw.js",{scope:"/",type:"classic"}),a=async()=>{await(e==null?void 0:e.messageSkipWaiting())};{let i=!1;const s=()=>{i=!0,e==null||e.addEventListener("controlling",t=>{t.isUpdate&&window.location.reload()}),o==null||o()};e.addEventListener("installed",t=>{typeof t.isUpdate>"u"?typeof t.isExternal<"u"?t.isExternal?s():!i&&(n==null||n()):t.isExternal?window.location.reload():!i&&(n==null||n()):t.isUpdate||n==null||n()}),e.addEventListener("waiting",s),e.addEventListener("externalwaiting",s)}e.register({immediate:g}).then(i=>{r?r("/sw.js",i):l==null||l(i)}).catch(i=>{d==null||d(i)})}}return f=v(),p}const W=R({onOfflineReady(){},onNeedRefresh(){E.value=W}});export{W as default};
