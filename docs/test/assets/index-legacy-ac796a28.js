System.register(["./reference-b1a48a0f-legacy-578a01e1.js","./entries-49a38532-legacy-a7c3725c.js"],(function(e,t){"use strict";var n,l,r,a,i,o,c,u,d,s,m,f,p,x,_,g,b,v,h,y,k,C,E,R,T,I,w,B,L,J,N,S,P,O,D,K,j;return{setters:[e=>{n=e._,l=e.a4,r=e.bx,a=e.bJ,i=e.W,o=e.U,c=e.bK,u=e.bL,d=e.bM,s=e.bD,m=e.k,f=e.bN,p=e.bO,x=e.bP,_=e.bQ,g=e.bR,b=e.bS,v=e.ag,h=e.bI,y=e.bT,k=e.$,C=e.bU},e=>{E=e.r,R=e.aO,T=e.a$,I=e.s,w=e.e,B=e.aN,L=e.b9,J=e.b3,N=e.aH,S=e.b0,P=e.b1,O=e.ad,D=e.b2,K=e.aG,j=e.a4}],execute:function(){e("default",(function(e){var g,b,v,h=e.multiSelect,y=void 0!==h&&h,k=e.selected,C=void 0===k?[]:k,w=e.setSelected,B=e.onChange,L=e.column,J=void 0===L?[]:L,N=e.dataReference,S=e.fixedOrders,P=e.output,O=e.detailPage,D=e.columnsShowOne2ManyDto,K=e.pageProps,j=e.fixedCond,M=e.visible,Q=e.applicationName,W=e.remoteComponent,F=E.exports.useState(!0),V=n(F,2),$=V[0],H=V[1],q=E.exports.useState([]),z=n(q,2),A=z[0],X=z[1],Y=E.exports.useState([]),Z=n(Y,2),ee=Z[0],te=Z[1],ne=E.exports.useState(""),le=n(ne,2),re=le[0],ae=le[1],ie=E.exports.useState([]),oe=n(ie,2),ce=oe[0],ue=oe[1],de=N.configInfo||{},se=null==de||null===(g=de.treeConfig)||void 0===g?void 0:g.treeEntityReferenceColFiled,me=E.exports.useState(null),fe=n(me,2),pe=fe[0],xe=fe[1],_e=E.exports.useContext(l).appData,ge=E.exports.useContext(r).pageId,be=a(se,de.treeColumns||[]),ve=E.exports.useCallback(function(){var e=i(o.mark((function e(t){var n,l,r,a,i,f,p,x;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),l={and:null!=pe&&pe.length?pe:[]},se&&re&&(a=R(r="EQ_".concat(u(N.entityName),"Dto_")).call(r,se),l.and.push(T({},a,re))),i=[],null!==(n=l.and)&&void 0!==n&&n.length&&i.push(l),e.prev=5,e.next=8,d({params:{pageInfo:t,dynamicSearchKeyCond:null!=i&&i.length?i:null,fixedCond:null!=j&&j.length?j:null,fixedOrders:null!=S&&S.length?S:null},entity:s(N,R(f=[]).call(f,m(P||[]),m(be||[])),O),dataReference:N,pageProps:K,appData:_e,pageId:ge});case 8:p=e.sent,x=p.content,x=c(x,null==de?void 0:de.currentId,D||""),X(x),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.error(e.t0);case 17:return e.prev=17,H(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),[N.entityName,re,pe]),he=function(){var e=i(o.mark((function e(){var t,n,l;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.next=3,p({entityName:(null===(t=de.treeConfig)||void 0===t?void 0:t.treeEntityName)||"",columns:de.treeColumns||[],appInfo:N.appInfo,dataReference:N,appData:_e,pageId:ge});case 3:n=e.sent,l=f(n,"treeParentId","0"),ue(n),te(l),H(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return E.exports.useEffect((function(){var e;null!=de&&null!==(e=de.treeConfig)&&void 0!==e&&e.treeEntityName&&he()}),[null==de||null===(b=de.treeConfig)||void 0===b?void 0:b.treeEntityName]),E.exports.useEffect((function(){ve(x)}),[M,re,pe]),I.createElement("div",{className:t.referenceModalList},I.createElement("div",{className:t.leftTreeRightList},I.createElement("div",null,I.createElement(_,{columns:(null==N||null===(v=N.configInfo)||void 0===v?void 0:v.search)||[],onSearch:function(e){xe((null==e?void 0:e.length)<=0?null:e)},applicationName:Q,remoteComponent:W})),I.createElement(U,{clickedTreeKey:re,setClickedTreeKey:ae,treeData:ee,treeColumns:(null==de?void 0:de.treeColumns)||[],treeList:ce}),$?I.createElement("div",{className:t.loadingContent}):I.createElement(G,{treeData:ee,list:A,selected:C,setSelected:w,column:J,multi:y,dataReference:N,configInfo:de,clickedTreeKey:re,setClickedTreeKey:ae,detailPage:O,onChange:B})))}));var t={leftTreeRightList:"index-module_leftTreeRightList__7JJbP",treeBreadcrumb:"index-module_treeBreadcrumb__2JMIQ",treeBreadcrumbItem:"index-module_treeBreadcrumbItem__3TkRC",leftTreeRightListContent:"index-module_leftTreeRightListContent__R5O8G",emptyContent:"index-module_emptyContent__VvvWl",mgt10:"index-module_mgt10__Idhes",searchBlock:"index-module_searchBlock__IBOBt"};function M(e,t){var n=K(e);if(j){var l=j(e);t&&(l=J(l).call(l,(function(t){return D(e,t).enumerable}))),n.push.apply(n,l)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n,l,r=null!=arguments[t]?arguments[t]:{};t%2?N(n=M(Object(r),!0)).call(n,(function(t){T(e,t,r[t])})):S?P(e,S(r)):N(l=M(Object(r))).call(l,(function(t){O(e,t,D(r,t))}))}return e}function G(e){var l=e.treeData,r=e.list,a=e.selected,i=e.setSelected,o=e.column,c=e.multi,u=e.dataReference,d=e.configInfo,s=e.clickedTreeKey,m=e.setClickedTreeKey,f=e.detailPage,p=e.onChange,x=E.exports.useState([]),_=n(x,2),y=_[0],k=_[1],C=function e(t,n){var l=[];return n.length<=0?[]:(n&&N(n).call(n,(function(n){n.id===t?l=n.children||[]:n.children&&e(t,n.children)})),l)},R=function(){var e;e=s?C(s,l||[]):l,k(e)};return E.exports.useEffect((function(){R()}),[s]),(null==l?void 0:l.length)<=0?I.createElement("div",null,r.length>0?I.createElement(E.exports.Fragment,null,B(r).call(r,(function(e){return I.createElement(g,{item:e,selectedList:a,setSelectedList:i,column:o,multi:c,key:e.id,dataReference:u,detailPage:f,onChange:p})}))):I.createElement(b,null)):I.createElement("div",{className:t.leftTreeRightListContent},y.length>0?I.createElement(v,null,B(y).call(y,(function(e){var t;return I.createElement(v.Item,{onClick:function(){return function(e){e.id&&m(e.id)}(e)},key:e.id,extra:I.createElement(L,{name:"LinedElementsPortal"})},B(t=(null==d?void 0:d.treeColumns)||[]).call(t,(function(t){return I.createElement("span",{style:{marginRight:"4px"},key:t.name},I.createElement(h,{value:e[t.name],dataType:null==t?void 0:t.dataType,extra:Q(Q({},t),{},{field:t.name,record:e,relationEntity:null==t?void 0:t.relationEntity})}))})))}))):null,null!=r&&r.length?I.createElement("div",{className:t.mgt10},B(r).call(r,(function(e){return I.createElement(g,{item:e,selectedList:a,setSelectedList:i,column:o,multi:c,key:e.id,dataReference:u,detailPage:f})}))):null,0===y.length&&0===r.length?I.createElement("div",{className:t.emptyContent},I.createElement(b,null)):null)}function W(e,t){var n=K(e);if(j){var l=j(e);t&&(l=J(l).call(l,(function(t){return D(e,t).enumerable}))),n.push.apply(n,l)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n,l,r=null!=arguments[t]?arguments[t]:{};t%2?N(n=W(Object(r),!0)).call(n,(function(t){T(e,t,r[t])})):S?P(e,S(r)):N(l=W(Object(r))).call(l,(function(t){O(e,t,D(r,t))}))}return e}function U(e){var l=e.clickedTreeKey,r=e.setClickedTreeKey;e.treeData;var a=e.treeColumns,i=e.treeList,o=E.exports.useState([]),c=n(o,2),u=c[0],d=c[1];return E.exports.useEffect((function(){if(l){var e,t=y(l,i);t&&d(J(e=t.split("/")).call(e,(function(e){return"0"!==e&&e})))}}),[l]),I.createElement("div",{className:t.treeBreadcrumb},I.createElement("span",{className:t.treeBreadcrumbItem,onClick:function(){l&&(r(""),d([]))}},k.t({k:"user.menu.all",d:"全部"})),B(u).call(u,(function(e){return I.createElement("span",{key:e,className:t.treeBreadcrumbItem,onClick:function(){e!==l&&r(e)}},function(e){var t,n=C(e,i)||{};return B(t=a||[]).call(t,(function(e){return I.createElement("span",{style:{marginRight:"4px"},key:e.name},I.createElement(h,{value:null==n?void 0:n[null==e?void 0:e.name],dataType:null==e?void 0:e.dataType,extra:F(F({},e),{},{field:e.name,record:n,relationEntity:null==e?void 0:e.relationEntity})}))}))}(e))})))}w('.index-module_leftTreeRightList__7JJbP{-webkit-box-orient:vertical;-webkit-box-direction:normal;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;height:100%}.index-module_leftTreeRightList__7JJbP .index-module_treeBreadcrumb__2JMIQ{-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:30px;overflow-x:auto;white-space:nowrap;width:100%}.index-module_leftTreeRightList__7JJbP .index-module_treeBreadcrumb__2JMIQ .index-module_treeBreadcrumbItem__3TkRC:not(:last-child):after{color:#ddd;content:">";cursor:auto;margin:0 4px}.index-module_leftTreeRightList__7JJbP .index-module_treeBreadcrumb__2JMIQ .index-module_treeBreadcrumbItem__3TkRC:first-child,.index-module_leftTreeRightList__7JJbP .index-module_treeBreadcrumb__2JMIQ .index-module_treeBreadcrumbItem__3TkRC:not(:last-child){color:#586a95}.index-module_leftTreeRightList__7JJbP .index-module_leftTreeRightListContent__R5O8G{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:auto}.index-module_leftTreeRightList__7JJbP .index-module_leftTreeRightListContent__R5O8G .index-module_emptyContent__VvvWl{-webkit-box-pack:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:100%;-webkit-justify-content:center;justify-content:center}.index-module_mgt10__Idhes{margin-top:12px}.index-module_searchBlock__IBOBt{margin:5px 0;padding:0 16px}.index-module_searchBlock__IBOBt .adm-search-bar{pointer-events:none}')}}}));
