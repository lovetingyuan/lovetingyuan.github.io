System.register(["./entries-49a38532-legacy-a7c3725c.js","./reference-b1a48a0f-legacy-578a01e1.js","./FileIcon-b321a387-legacy-b7807a96.js","./index-legacy-1ce3271b.js"],(function(e,t){"use strict";var n,o,a,i,r,l,s,c,u,d,p,f,h,m,v,g,b,w,y,x,E,S,C,D,k,N,_,T,I,P,A,R,M,O,L,F,z,U,K,B,j,X,q,Y,H,$,W,G,J,V,Q,Z,ee,te,ne,oe,ae,ie,re,le,se,ce,ue,de,pe,fe,he,me,ve,ge,be,we,ye,xe,Ee,Se,Ce,De,ke,Ne,_e,Te,Ie,Pe,Ae,Re,Me,Oe,Le,Fe;return{setters:[e=>{n=e.e,o=e.s,a=e.b9,i=e.d,r=e.B,l=e.b3,s=e.aH,c=e.aS,u=e.a3,d=e.bo,p=e.j,f=e.aL,h=e.aK,m=e.aN,v=e.a9,g=e.aJ,b=e.a$,w=e.aG,y=e.bb,x=e.aO,E=e.ad,S=e.b0,C=e.b1,D=e.b2,k=e.aT,N=e.aM,_=e.aU,T=e.aa,I=e.a4,P=e.aX,A=e.bf,R=e.aY,M=e.r,O=e.aQ,L=e.aE,F=e.b4,z=e.bm},e=>{U=e.R,K=e.ac,B=e.ad,j=e.ae,X=e.af,q=e.ag,Y=e.ah,H=e.v,$=e.ai,W=e.aj,G=e.P,J=e.k,V=e.ak,Q=e.j,Z=e.aa,ee=e._,te=e.al,ne=e.am,oe=e.S,ae=e.X,ie=e.an,re=e.ao,le=e.ap,se=e.aq,ce=e.ar,ue=e.$,de=e.as,pe=e.W,fe=e.U,he=e.a,me=e.at,ve=e.au,ge=e.av,be=e.aw,we=e.ax,ye=e.ay,xe=e.az,Ee=e.aA,Se=e.aB,Ce=e.aC,De=e.aD,ke=e.aE,Ne=e.aF,_e=e.g,Te=e.aG,Ie=e.aH,Pe=e.aI,Ae=e.aJ,Re=e.aK,Me=e.aL},e=>{Oe=e.d,Le=e.T},e=>{Fe=e.u}],execute:function(){n(".upload-operation-wrap .upload-head-content{border-bottom:1px solid var(--boder-medium,#ebedf2);display:-webkit-box;display:-webkit-flex;display:flex;padding:20px 12px}.upload-operation-wrap .upload-head-content>.anticon{line-height:1}.upload-operation-wrap .upload-head-content .upload-info-content{-webkit-box-flex:1;color:var(--text-medium,#9da6b2);-webkit-flex:1;flex:1;font-size:var(--font-1,12px);margin-left:4px}.upload-operation-wrap .upload-head-content .upload-info-content .upload-info-title{color:var(--text-ultrastrong,#131f31);font-size:var(--font-3,16px);line-height:22px}.upload-operation-wrap .upload-head-content .upload-info-content .upload-info-other,.upload-operation-wrap .upload-head-content .upload-info-content .upload-info-size{line-height:16px;margin-top:2px}.upload-operation-wrap .upload-operation-content .adm-list-item.disabled{opacity:.5}");var t=function(e){var t=e.visible,n=e.file,i=e.disabledPreview,r=e.onClose,l=e.onDownload,s=e.onRemove,c=e.onPreview,u=e.disabledDownload,d=e.disabledRemove,p=e.showPreview,f=e.showDownload,h=e.showRemove;return o.createElement(U,{onMaskClick:r,visible:t,bodyStyle:{height:"45vh",borderRadius:"12px 12px 0 0 ",overflow:"hidden"}},o.createElement("div",{className:"upload-operation-wrap"},o.createElement("div",{className:"upload-head-content"},Oe(K(B(null==n?void 0:n.name)),48),o.createElement("div",{className:"upload-info-content"},o.createElement("div",{className:"upload-info-title"},null==n?void 0:n.name),o.createElement("div",{className:"upload-info-size"},j(null==n?void 0:n.size)),o.createElement("div",{className:"upload-info-other"},"来自",null==n?void 0:n.createUserName,".",X(null==n?void 0:n.creatTime))),o.createElement(a,{name:"LinedClose",onClick:r})),f||h||p?o.createElement("div",{className:"upload-operation-content"},o.createElement(q,null,f&&o.createElement(q.Item,{className:u?"disabled":"",lines:!1,prefix:o.createElement(a,{name:"LinedDownload"}),onClick:l},"下载"),p&&o.createElement(q.Item,{className:i?"disabled":"",lines:!1,prefix:o.createElement(a,{name:"LinedEye"}),onClick:c},"预览"),h&&o.createElement(q.Item,{className:d?"disabled":"",lines:!1,prefix:o.createElement(a,{name:"LinedDelete"}),onClick:s},"删除"))):null))};n(".upload-batch-wrap{-webkit-box-orient:vertical;-webkit-box-direction:normal;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.upload-batch-wrap .bacth-navbar{padding:0 16px}.upload-batch-wrap .bacth-navbar .adm-nav-bar-back{display:none}.upload-batch-wrap .bacth-navbar .navbar-select{color:var(--text-ultrastrong,#131f31);font-size:var(--font-3,16px)}.upload-batch-wrap .bacth-navbar .navbar-done{color:var(--brand6-1,#00a0b4);font-size:var(--font3,16px)}.upload-batch-wrap .upload-batch-list{height:-webkit-calc(100vh - 101px);height:calc(100vh - 101px)}.upload-batch-wrap .upload-batch-list .adm-list.adm-list-default{height:100%}.upload-batch-wrap .upload-batch-list .adm-list.adm-list-default .adm-list-body{height:100%;overflow-y:auto}.upload-batch-wrap .upload-batch-list .upload-list-item{--prefix-width:auto;min-width:168px}.upload-batch-wrap .upload-batch-list .upload-list-item .adm-list-item-content{border:none;min-height:auto;padding:0!important}.upload-batch-wrap .upload-batch-list .upload-list-item .adm-list-item-content .adm-list-item-content-prefix{padding-right:0}.upload-batch-wrap .upload-batch-list .upload-list-item .adm-list-item-content-main{border-bottom:1px solid var(--border-medium,#ebedf2);display:-webkit-box;display:-webkit-flex;display:flex;margin-left:12px;overflow:hidden;padding:12px 12px 12px 0;width:100%}.upload-batch-wrap .upload-batch-list .upload-list-item .adm-list-item-content-main .list-item-content{-webkit-box-flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-box-pack:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex:1;flex:1;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:center;justify-content:center;margin-left:8px;margin-right:8px;overflow:hidden;width:0}.upload-batch-wrap .upload-batch-list .upload-list-item .adm-list-item-content-main .list-item-content .list-item-title{-webkit-line-clamp:1;-webkit-box-orient:vertical;color:var(--adm-color-text);display:-webkit-box;font-size:var(--font-3,16px);overflow:hidden;text-overflow:ellipsis;word-break:break-all}.upload-batch-wrap .upload-batch-list .upload-list-item .adm-list-item-content-main .list-item-content .list-item-title.disabled{color:var(--disabled-medium,#c9cdd4)}.upload-batch-wrap .upload-batch-list .upload-list-item .adm-list-item-content-main .list-item-content .list-item-other,.upload-batch-wrap .upload-batch-list .upload-list-item .adm-list-item-content-main .list-item-content .list-item-size{color:var(--adm-color-weak,#b1b8c4);font-size:var(--font-1,12px);font-weight:400;line-height:16px;margin-top:4px;white-space:nowrap}.upload-batch-wrap .upload-batch-list .upload-list-item .adm-list-item-content-main .list-item-icon{-webkit-box-pack:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;font-size:18px;height:inherit;-webkit-justify-content:center;justify-content:center}.upload-batch-wrap .upload-batch-bottom{-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:56px}.upload-batch-wrap .upload-batch-bottom .batch-btn{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:100%}.upload-batch-wrap .upload-batch-bottom .batch-btn.disabled{opacity:.5}.ant-upload-draggable-list-item{border-bottom:2px dashed transparent;border-top:2px dashed transparent;height:inherit}.ant-upload-draggable-list-item.drop-over-downward{border-bottom-color:#ccc}.ant-upload-draggable-list-item.drop-over-upward{border-top-color:#ccc}.dragging-item{box-shadow:2px 2px #ccc}"),i({target:"Number",stat:!0,forced:Number.parseInt!=Y},{parseInt:Y});var ze=r.Number.parseInt;
/**!
			 * Sortable 1.15.0
			 * @author	RubaXa   <trash@rubaxa.org>
			 * @author	owenm    <owen23355@gmail.com>
			 * @license MIT
			 */function Ue(e,t){var n=w(e);if(I){var o=I(e);t&&(o=l(o).call(o,(function(t){return D(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n,o=null!=arguments[t]?arguments[t]:{};if(t%2)s(n=Ue(Object(o),!0)).call(n,(function(t){je(e,t,o[t])}));else if(S)C(e,S(o));else{var a;s(a=Ue(Object(o))).call(a,(function(t){E(e,t,D(o,t))}))}}return e}function Be(e){return Be="function"==typeof P&&"symbol"==typeof A?function(e){return typeof e}:function(e){return e&&"function"==typeof P&&e.constructor===P&&e!==P.prototype?"symbol":typeof e},Be(e)}function je(e,t,n){return t in e?E(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(){return Xe=v||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Xe.apply(this,arguments)}function qe(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=w(e);for(o=0;o<i.length;o++)n=i[o],u(t).call(t,n)>=0||(a[n]=e[n]);return a}(e,t);if(I){var i=I(e);for(o=0;o<i.length;o++)n=i[o],u(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ye(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if(void 0!==P&&null!=se(e)||null!=e["@@iterator"])return ce(e)}(e)||function(e,t){var n;if(e){if("string"==typeof e)return He(e,t);var o=R(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?ce(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?He(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function $e(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var We=$e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ge=$e(/Edge/i),Je=$e(/firefox/i),Ve=$e(/safari/i)&&!$e(/chrome/i)&&!$e(/android/i),Qe=$e(/iP(ad|od|hone)/i),Ze=$e(/chrome/i)&&$e(/android/i),et={capture:!1,passive:!1};function tt(e,t,n){e.addEventListener(t,n,!We&&et)}function nt(e,t,n){e.removeEventListener(t,n,!We&&et)}function ot(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function at(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function it(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&ot(e,t):ot(e,t))||o&&e===n)return e;if(e===n)break}while(e=at(e))}return null}var rt,lt=/\s+/g;function st(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(lt," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(lt," ")}}function ct(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==u(t).call(t,"webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function ut(e,t){var n="";if("string"==typeof e)n=e;else do{var o=ct(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function dt(e,t,n){if(e){var o=e.getElementsByTagName(t),a=0,i=o.length;if(n)for(;a<i;a++)n(o[a],a);return o}return[]}function pt(){return document.scrollingElement||document.documentElement}function ft(e,t,n,o,a){if(e.getBoundingClientRect||e===window){var i,r,l,s,c,u,d;if(e!==window&&e.parentNode&&e!==pt()?(r=(i=e.getBoundingClientRect()).top,l=i.left,s=i.bottom,c=i.right,u=i.height,d=i.width):(r=0,l=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!We))do{if(a&&a.getBoundingClientRect&&("none"!==ct(a,"transform")||n&&"static"!==ct(a,"position"))){var p=a.getBoundingClientRect();r-=p.top+W(ct(a,"border-top-width")),l-=p.left+W(ct(a,"border-left-width")),s=r+i.height,c=l+i.width;break}}while(a=a.parentNode);if(o&&e!==window){var f=ut(a||e),h=f&&f.a,m=f&&f.d;f&&(s=(r/=m)+(u/=m),c=(l/=h)+(d/=h))}return{top:r,left:l,bottom:s,right:c,width:d,height:u}}}function ht(e,t,n){for(var o=wt(e,!0),a=ft(e)[t];o;){var i=ft(o)[n];if(!("top"===n||"left"===n?a>=i:a<=i))return o;if(o===pt())break;o=wt(o,!1)}return!1}function mt(e,t,n,o){for(var a=0,i=0,r=e.children;i<r.length;){if("none"!==r[i].style.display&&r[i]!==Dn.ghost&&(o||r[i]!==Dn.dragged)&&it(r[i],n.draggable,e,!1)){if(a===t)return r[i];a++}i++}return null}function vt(e,t){for(var n=e.lastElementChild;n&&(n===Dn.ghost||"none"===ct(n,"display")||t&&!ot(n,t));)n=n.previousElementSibling;return n||null}function gt(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Dn.clone||t&&!ot(e,t)||n++;return n}function bt(e){var t=0,n=0,o=pt();if(e)do{var a=ut(e),i=a.a,r=a.d;t+=e.scrollLeft*i,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function wt(e,t){if(!e||!e.getBoundingClientRect)return pt();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=ct(n);if(n.clientWidth<n.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!n.getBoundingClientRect||n===document.body)return pt();if(o||t)return n;o=!0}}}while(n=n.parentNode);return pt()}function yt(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function xt(e,t){return function(){if(!rt){var n=arguments,o=this;1===n.length?e.call(o,n[0]):e.apply(o,n),rt=setTimeout((function(){rt=void 0}),t)}}}function Et(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function St(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Ct(e,t){ct(e,"position","absolute"),ct(e,"top",t.top),ct(e,"left",t.left),ct(e,"width",t.width),ct(e,"height",t.height)}function Dt(e){ct(e,"position",""),ct(e,"top",""),ct(e,"left",""),ct(e,"width",""),ct(e,"height","")}var kt="Sortable"+(new Date).getTime(),Nt=[],_t={initializeByDefault:!0},Tt={mount:function(e){for(var t in _t)_t.hasOwnProperty(t)&&!(t in e)&&(e[t]=_t[t]);s(Nt).call(Nt,(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),Nt.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var a=e+"Global";s(Nt).call(Nt,(function(o){t[o.pluginName]&&(t[o.pluginName][a]&&t[o.pluginName][a](Ke({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](Ke({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var a in s(Nt).call(Nt,(function(o){var a=o.pluginName;if(e.options[a]||o.initializeByDefault){var i=new o(e,t,e.options);i.sortable=e,i.options=e.options,e[a]=i,Xe(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);void 0!==i&&(e.options[a]=i)}},getEventProperties:function(e,t){var n={};return s(Nt).call(Nt,(function(o){"function"==typeof o.eventProperties&&Xe(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return s(Nt).call(Nt,(function(a){e[a.pluginName]&&a.optionListeners&&"function"==typeof a.optionListeners[t]&&(o=a.optionListeners[t].call(e[a.pluginName],n))})),o}};function It(e){var t=e.sortable,n=e.rootEl,o=e.name,a=e.targetEl,i=e.cloneEl,r=e.toEl,l=e.fromEl,s=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,p=e.originalEvent,f=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[kt]){var m,v=t.options,g="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||We||Ge?(m=document.createEvent("Event")).initEvent(o,!0,!0):m=new CustomEvent(o,{bubbles:!0,cancelable:!0}),m.to=r||n,m.from=l||n,m.item=a||n,m.clone=i,m.oldIndex=s,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=p,m.pullMode=f?f.lastPutMode:void 0;var b=Ke(Ke({},h),Tt.getEventProperties(o,t));for(var w in b)m[w]=b[w];n&&n.dispatchEvent(m),v[g]&&v[g].call(t,m)}}var Pt=["evt"],At=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,a=qe(n,Pt);Tt.pluginEvent.bind(Dn)(e,t,Ke({dragEl:Mt,parentEl:Ot,ghostEl:Lt,rootEl:Ft,nextEl:zt,lastDownEl:Ut,cloneEl:Kt,cloneHidden:Bt,dragStarted:en,putSortable:$t,activeSortable:Dn.active,originalEvent:o,oldIndex:jt,oldDraggableIndex:qt,newIndex:Xt,newDraggableIndex:Yt,hideGhostForTarget:xn,unhideGhostForTarget:En,cloneNowHidden:function(){Bt=!0},cloneNowShown:function(){Bt=!1},dispatchSortableEvent:function(e){Rt({sortable:t,name:e,originalEvent:o})}},a))};function Rt(e){It(Ke({putSortable:$t,cloneEl:Kt,targetEl:Mt,rootEl:Ft,oldIndex:jt,oldDraggableIndex:qt,newIndex:Xt,newDraggableIndex:Yt},e))}var Mt,Ot,Lt,Ft,zt,Ut,Kt,Bt,jt,Xt,qt,Yt,Ht,$t,Wt,Gt,Jt,Vt,Qt,Zt,en,tn,nn,on,an,rn=!1,ln=!1,sn=[],cn=!1,un=!1,dn=[],pn=!1,fn=[],hn="undefined"!=typeof document,mn=Qe,vn=Ge||We?"cssFloat":"float",gn=hn&&!Ze&&!Qe&&"draggable"in document.createElement("div"),bn=function(){if(hn){if(We)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),wn=function(e,t){var n=ct(e),o=W(n.width)-W(n.paddingLeft)-W(n.paddingRight)-W(n.borderLeftWidth)-W(n.borderRightWidth),a=mt(e,0,t),i=mt(e,1,t),r=a&&ct(a),l=i&&ct(i),s=r&&W(r.marginLeft)+W(r.marginRight)+ft(a).width,c=l&&W(l.marginLeft)+W(l.marginRight)+ft(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&"none"!==r.float){var u="left"===r.float?"left":"right";return!i||"both"!==l.clear&&l.clear!==u?"horizontal":"vertical"}return a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=o&&"none"===n[vn]||i&&"none"===n[vn]&&s+c>o)?"vertical":"horizontal"},yn=function(e){function t(e,n){return function(o,a,i,r){var l=o.options.group.name&&a.options.group.name&&o.options.group.name===a.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,a,i,r),n)(o,a,i,r);var s=(n?o:a).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&u(e).call(e,s)>-1}}var n={},o=e.group;o&&"object"==Be(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},xn=function(){!bn&&Lt&&ct(Lt,"display","none")},En=function(){!bn&&Lt&&ct(Lt,"display","")};hn&&!Ze&&document.addEventListener("click",(function(e){if(ln)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ln=!1,!1}),!0);var Sn=function(e){if(Mt){e=e.touches?e.touches[0]:e;var t=(a=e.clientX,i=e.clientY,H(sn).call(sn,(function(e){var t=e[kt].options.emptyInsertThreshold;if(t&&!vt(e)){var n=ft(e),o=a>=n.left-t&&a<=n.right+t,l=i>=n.top-t&&i<=n.bottom+t;return o&&l?r=e:void 0}})),r);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[kt]._onDragOver(n)}}var a,i,r},Cn=function(e){Mt&&Mt.parentNode[kt]._isOutsideThisEl(e.target)};function Dn(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Xe({},t),e[kt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(ze?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Dn.supportPointer&&"PointerEvent"in window&&!Ve,emptyInsertThreshold:5};for(var o in Tt.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var a in yn(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&gn,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?tt(e,"pointerdown",this._onTapStart):(tt(e,"mousedown",this._onTapStart),tt(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(tt(e,"dragover",this),tt(e,"dragenter",this)),sn.push(this.el),t.store&&t.store.get&&G(this).call(this,t.store.get(this)||[]),Xe(this,function(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=R([]).call(this.el.children);s(e).call(e,(function(e){if("none"!==ct(e,"display")&&e!==Dn.ghost){t.push({target:e,rect:ft(e)});var n=Ke({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=ut(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){c(t).call(t,function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var a=!1,i=0;s(t).call(t,(function(e){var t=0,n=e.target,r=n.fromRect,l=ft(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=ut(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&yt(s,l)&&!yt(r,l)&&(u.top-l.top)/(u.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(t=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(u,s,c,o.options)),yt(l,r)||(n.prevFromRect=r,n.prevToRect=l,t||(t=o.options.animation),o.animate(n,u,l,t)),t&&(a=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),a?e=setTimeout((function(){"function"==typeof n&&n()}),i):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){ct(e,"transition",""),ct(e,"transform","");var a=ut(this.el),i=a&&a.a,r=a&&a.d,l=(t.left-n.left)/(i||1),s=(t.top-n.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,ct(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),ct(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ct(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){ct(e,"transition",""),ct(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}())}function kn(e,t,n,o,a,i,r,l){var s,c,u=e[kt],d=u.options.onMove;return!window.CustomEvent||We||Ge?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=a||t,s.relatedRect=i||ft(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),d&&(c=d.call(u,s,r)),c}function Nn(e){e.draggable=!1}function _n(){pn=!1}function Tn(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function In(e){return setTimeout(e,0)}function Pn(e){return clearTimeout(e)}Dn.prototype={constructor:Dn,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(tn=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Mt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,a=o.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(r||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,u=l(o);if(function(e){fn.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&fn.push(o)}}(n),!Mt&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||o.disabled)&&!c.isContentEditable&&(this.nativeDraggable||!Ve||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=it(s,o.draggable,n,!1))&&s.animated||Ut===s)){if(jt=gt(s),qt=gt(s,o.draggable),"function"==typeof u){if(u.call(this,e,s,this))return Rt({sortable:t,rootEl:c,name:"filter",targetEl:s,toEl:n,fromEl:n}),At("filter",t,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(u){var d;if(u=H(d=u.split(",")).call(d,(function(o){if(o=it(c,$(o).call(o),n,!1))return Rt({sortable:t,rootEl:o,name:"filter",targetEl:s,fromEl:n,toEl:n}),At("filter",t,{evt:e}),!0})))return void(a&&e.cancelable&&e.preventDefault())}o.handle&&!it(c,o.handle,n,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,t,n){var o,a=this,i=a.el,r=a.options,l=i.ownerDocument;if(n&&!Mt&&n.parentNode===i){var c,u=ft(n);if(Ft=i,Ot=(Mt=n).parentNode,zt=Mt.nextSibling,Ut=n,Ht=r.group,Dn.dragged=Mt,Wt={target:Mt,clientX:(t||e).clientX,clientY:(t||e).clientY},Qt=Wt.clientX-u.left,Zt=Wt.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Mt.style["will-change"]="all",o=function(){At("delayEnded",a,{evt:e}),Dn.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!Je&&a.nativeDraggable&&(Mt.draggable=!0),a._triggerDragStart(e,t),Rt({sortable:a,name:"choose",originalEvent:e}),st(Mt,r.chosenClass,!0))},s(c=r.ignore.split(",")).call(c,(function(e){dt(Mt,$(e).call(e),Nn)})),tt(l,"dragover",Sn),tt(l,"mousemove",Sn),tt(l,"touchmove",Sn),tt(l,"mouseup",a._onDrop),tt(l,"touchend",a._onDrop),tt(l,"touchcancel",a._onDrop),Je&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Mt.draggable=!0),At("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(Ge||We))o();else{if(Dn.eventCanceled)return void this._onDrop();tt(l,"mouseup",a._disableDelayedDrag),tt(l,"touchend",a._disableDelayedDrag),tt(l,"touchcancel",a._disableDelayedDrag),tt(l,"mousemove",a._delayedDragTouchMoveHandler),tt(l,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&tt(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(o,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Mt&&Nn(Mt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;nt(e,"mouseup",this._disableDelayedDrag),nt(e,"touchend",this._disableDelayedDrag),nt(e,"touchcancel",this._disableDelayedDrag),nt(e,"mousemove",this._delayedDragTouchMoveHandler),nt(e,"touchmove",this._delayedDragTouchMoveHandler),nt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?tt(document,"pointermove",this._onTouchMove):tt(document,t?"touchmove":"mousemove",this._onTouchMove):(tt(Mt,"dragend",this),tt(Ft,"dragstart",this._onDragStart));try{document.selection?In((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(rn=!1,Ft&&Mt){At("dragStarted",this,{evt:t}),this.nativeDraggable&&tt(document,"dragover",Cn);var n=this.options;!e&&st(Mt,n.dragClass,!1),st(Mt,n.ghostClass,!0),Dn.active=this,e&&this._appendGhost(),Rt({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Gt){this._lastX=Gt.clientX,this._lastY=Gt.clientY,xn();for(var e=document.elementFromPoint(Gt.clientX,Gt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Gt.clientX,Gt.clientY))!==t;)t=e;if(Mt.parentNode[kt]._isOutsideThisEl(e),t)do{if(t[kt]&&t[kt]._onDragOver({clientX:Gt.clientX,clientY:Gt.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);En()}},_onTouchMove:function(e){if(Wt){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,a=e.touches?e.touches[0]:e,i=Lt&&ut(Lt,!0),r=Lt&&i&&i.a,l=Lt&&i&&i.d,s=mn&&an&&bt(an),c=(a.clientX-Wt.clientX+o.x)/(r||1)+(s?s[0]-dn[0]:0)/(r||1),u=(a.clientY-Wt.clientY+o.y)/(l||1)+(s?s[1]-dn[1]:0)/(l||1);if(!Dn.active&&!rn){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Lt){var d,p,f,h,m;i?(i.e+=c-(Jt||0),i.f+=u-(Vt||0)):i={a:1,b:0,c:0,d:1,e:c,f:u};var v=x(d=x(p=x(f=x(h=x(m="matrix(".concat(i.a,",")).call(m,i.b,",")).call(h,i.c,",")).call(f,i.d,",")).call(p,i.e,",")).call(d,i.f,")");ct(Lt,"webkitTransform",v),ct(Lt,"mozTransform",v),ct(Lt,"msTransform",v),ct(Lt,"transform",v),Jt=c,Vt=u,Gt=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Lt){var e=this.options.fallbackOnBody?document.body:Ft,t=ft(Mt,!0,mn,!0,e),n=this.options;if(mn){for(an=e;"static"===ct(an,"position")&&"none"===ct(an,"transform")&&an!==document;)an=an.parentNode;an!==document.body&&an!==document.documentElement?(an===document&&(an=pt()),t.top+=an.scrollTop,t.left+=an.scrollLeft):an=pt(),dn=bt(an)}st(Lt=Mt.cloneNode(!0),n.ghostClass,!1),st(Lt,n.fallbackClass,!0),st(Lt,n.dragClass,!0),ct(Lt,"transition",""),ct(Lt,"transform",""),ct(Lt,"box-sizing","border-box"),ct(Lt,"margin",0),ct(Lt,"top",t.top),ct(Lt,"left",t.left),ct(Lt,"width",t.width),ct(Lt,"height",t.height),ct(Lt,"opacity","0.8"),ct(Lt,"position",mn?"absolute":"fixed"),ct(Lt,"zIndex","100000"),ct(Lt,"pointerEvents","none"),Dn.ghost=Lt,e.appendChild(Lt),ct(Lt,"transform-origin",Qt/W(Lt.style.width)*100+"% "+Zt/W(Lt.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,a=n.options;At("dragStart",this,{evt:e}),Dn.eventCanceled?this._onDrop():(At("setupClone",this),Dn.eventCanceled||((Kt=St(Mt)).removeAttribute("id"),Kt.draggable=!1,Kt.style["will-change"]="",this._hideClone(),st(Kt,this.options.chosenClass,!1),Dn.clone=Kt),n.cloneId=In((function(){At("clone",n),Dn.eventCanceled||(n.options.removeCloneOnHide||Ft.insertBefore(Kt,Mt),n._hideClone(),Rt({sortable:n,name:"clone"}))})),!t&&st(Mt,a.dragClass,!0),t?(ln=!0,n._loopId=setInterval(n._emulateDragOver,50)):(nt(document,"mouseup",n._onDrop),nt(document,"touchend",n._onDrop),nt(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(n,o,Mt)),tt(document,"drop",n),ct(Mt,"transform","translateZ(0)")),rn=!0,n._dragStartId=In(n._dragStarted.bind(n,t,e)),tt(document,"selectstart",n),en=!0,Ve&&ct(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,a,i=this.el,r=e.target,l=this.options,s=l.group,c=Dn.active,u=Ht===s,d=G(l),p=$t||c,f=this,h=!1;if(!pn){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=it(r,l.draggable,i,!0),T("dragOver"),Dn.eventCanceled)return h;if(Mt.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||f._ignoreWhileAnimating===r)return P(!1);if(ln=!1,c&&!l.disabled&&(u?d||(o=Ot!==Ft):$t===this||(this.lastPutMode=Ht.checkPull(this,c,Mt,e))&&s.checkPut(this,c,Mt,e))){if(a="vertical"===this._getDirection(e,r),t=ft(Mt),T("dragOverValid"),Dn.eventCanceled)return h;if(o)return Ot=Ft,I(),this._hideClone(),T("revert"),Dn.eventCanceled||(zt?Ft.insertBefore(Mt,zt):Ft.appendChild(Mt)),P(!0);var m=vt(i,l.draggable);if(!m||function(e,t,n){var o=ft(vt(n.el,n.options.draggable));return t?e.clientX>o.right+10||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+10}(e,a,this)&&!m.animated){if(m===Mt)return P(!1);if(m&&i===e.target&&(r=m),r&&(n=ft(r)),!1!==kn(Ft,i,Mt,t,r,n,e,!!r))return I(),m&&m.nextSibling?i.insertBefore(Mt,m.nextSibling):i.appendChild(Mt),Ot=i,A(),P(!0)}else if(m&&function(e,t,n){var o=ft(mt(n.el,0,n.options,!0));return t?e.clientX<o.left-10||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-10||e.clientY<o.bottom&&e.clientX<o.left}(e,a,this)){var v=mt(i,0,l,!0);if(v===Mt)return P(!1);if(n=ft(r=v),!1!==kn(Ft,i,Mt,t,r,n,e,!1))return I(),i.insertBefore(Mt,v),Ot=i,A(),P(!0)}else if(r.parentNode===i){n=ft(r);var g,b,w,y=Mt.parentNode!==i,x=!function(e,t,n){var o=n?e.left:e.top,a=n?e.right:e.bottom,i=n?e.width:e.height,r=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===r||a===l||o+i/2===r+s/2}(Mt.animated&&Mt.toRect||t,r.animated&&r.toRect||n,a),E=a?"top":"left",S=ht(r,"top","top")||ht(Mt,"top","top"),C=S?S.scrollTop:void 0;if(tn!==r&&(b=n[E],cn=!1,un=!x&&l.invertSwap||y),g=function(e,t,n,o,a,i,r,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,p=!1;if(!r)if(l&&on<c*a){if(!cn&&(1===nn?s>u+c*i/2:s<d-c*i/2)&&(cn=!0),cn)p=!0;else if(1===nn?s<u+on:s>d-on)return-nn}else if(s>u+c*(1-a)/2&&s<d-c*(1-a)/2)return function(e){return gt(Mt)<gt(e)?1:-1}(t);return(p=p||r)&&(s<u+c*i/2||s>d-c*i/2)?s>u+c/2?1:-1:0}(e,r,n,a,x?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,un,tn===r),0!==g){var D=gt(Mt);do{D-=g,w=Ot.children[D]}while(w&&("none"===ct(w,"display")||w===Lt))}if(0===g||w===r)return P(!1);tn=r,nn=g;var k=r.nextElementSibling,N=!1,_=kn(Ft,i,Mt,t,r,n,e,N=1===g);if(!1!==_)return 1!==_&&-1!==_||(N=1===_),pn=!0,setTimeout(_n,30),I(),N&&!k?i.appendChild(Mt):r.parentNode.insertBefore(Mt,N?k:r),S&&Et(S,0,C-S.scrollTop),Ot=Mt.parentNode,void 0===b||un||(on=Math.abs(b-ft(r)[E])),A(),P(!0)}if(i.contains(Mt))return P(!1)}return!1}function T(l,s){At(l,f,Ke({evt:e,isOwner:u,axis:a?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:d,fromSortable:p,target:r,completed:P,onMove:function(n,o){return kn(Ft,i,Mt,t,n,ft(n),e,o)},changed:A},s))}function I(){T("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function P(t){return T("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(f),f!==p&&(st(Mt,$t?$t.options.ghostClass:c.options.ghostClass,!1),st(Mt,l.ghostClass,!0)),$t!==f&&f!==Dn.active?$t=f:f===Dn.active&&$t&&($t=null),p===f&&(f._ignoreWhileAnimating=r),f.animateAll((function(){T("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===Mt&&!Mt.animated||r===i&&!r.animated)&&(tn=null),l.dragoverBubble||e.rootEl||r===document||(Mt.parentNode[kt]._isOutsideThisEl(e.target),!t&&Sn(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function A(){Xt=gt(Mt),Yt=gt(Mt,l.draggable),Rt({sortable:f,name:"change",toEl:i,newIndex:Xt,newDraggableIndex:Yt,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){nt(document,"mousemove",this._onTouchMove),nt(document,"touchmove",this._onTouchMove),nt(document,"pointermove",this._onTouchMove),nt(document,"dragover",Sn),nt(document,"mousemove",Sn),nt(document,"touchmove",Sn)},_offUpEvents:function(){var e=this.el.ownerDocument;nt(e,"mouseup",this._onDrop),nt(e,"touchend",this._onDrop),nt(e,"pointerup",this._onDrop),nt(e,"touchcancel",this._onDrop),nt(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Xt=gt(Mt),Yt=gt(Mt,n.draggable),At("drop",this,{evt:e}),Ot=Mt&&Mt.parentNode,Xt=gt(Mt),Yt=gt(Mt,n.draggable),Dn.eventCanceled||(rn=!1,un=!1,cn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Pn(this.cloneId),Pn(this._dragStartId),this.nativeDraggable&&(nt(document,"drop",this),nt(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ve&&ct(document.body,"user-select",""),ct(Mt,"transform",""),e&&(en&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Lt&&Lt.parentNode&&Lt.parentNode.removeChild(Lt),(Ft===Ot||$t&&"clone"!==$t.lastPutMode)&&Kt&&Kt.parentNode&&Kt.parentNode.removeChild(Kt),Mt&&(this.nativeDraggable&&nt(Mt,"dragend",this),Nn(Mt),Mt.style["will-change"]="",en&&!rn&&st(Mt,$t?$t.options.ghostClass:this.options.ghostClass,!1),st(Mt,this.options.chosenClass,!1),Rt({sortable:this,name:"unchoose",toEl:Ot,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ft!==Ot?(Xt>=0&&(Rt({rootEl:Ot,name:"add",toEl:Ot,fromEl:Ft,originalEvent:e}),Rt({sortable:this,name:"remove",toEl:Ot,originalEvent:e}),Rt({rootEl:Ot,name:"sort",toEl:Ot,fromEl:Ft,originalEvent:e}),Rt({sortable:this,name:"sort",toEl:Ot,originalEvent:e})),$t&&$t.save()):Xt!==jt&&Xt>=0&&(Rt({sortable:this,name:"update",toEl:Ot,originalEvent:e}),Rt({sortable:this,name:"sort",toEl:Ot,originalEvent:e})),Dn.active&&(null!=Xt&&-1!==Xt||(Xt=jt,Yt=qt),Rt({sortable:this,name:"end",toEl:Ot,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){At("nulling",this),Ft=Mt=Ot=Lt=zt=Kt=Ut=Bt=Wt=Gt=en=Xt=Yt=jt=qt=tn=nn=$t=Ht=Dn.dragged=Dn.ghost=Dn.clone=Dn.active=null,s(fn).call(fn,(function(e){e.checked=!0})),fn.length=Jt=Vt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Mt&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,a=n.length,i=this.options;o<a;o++)it(e=n[o],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||Tn(e));return t},sort:function(e,t){var n,o={},a=this.el;s(n=this.toArray()).call(n,(function(e,t){var n=a.children[t];it(n,this.options.draggable,a,!1)&&(o[e]=n)}),this),t&&this.captureAnimationState(),s(e).call(e,(function(e){o[e]&&(a.removeChild(o[e]),a.appendChild(o[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return it(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=Tt.modifyOption(this,e,t);n[e]=void 0!==o?o:t,"group"===e&&yn(n)},destroy:function(){At("destroy",this);var e=this.el;e[kt]=null,nt(e,"mousedown",this._onTapStart),nt(e,"touchstart",this._onTapStart),nt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(nt(e,"dragover",this),nt(e,"dragenter",this)),s(Array.prototype).call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),c(sn).call(sn,u(sn).call(sn,this.el),1),this.el=e=null},_hideClone:function(){if(!Bt){if(At("hideClone",this),Dn.eventCanceled)return;ct(Kt,"display","none"),this.options.removeCloneOnHide&&Kt.parentNode&&Kt.parentNode.removeChild(Kt),Bt=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Bt){if(At("showClone",this),Dn.eventCanceled)return;Mt.parentNode!=Ft||this.options.group.revertClone?zt?Ft.insertBefore(Kt,zt):Ft.appendChild(Kt):Ft.insertBefore(Kt,Mt),this.options.group.revertClone&&this.animate(Mt,Kt),ct(Kt,"display",""),Bt=!1}}else this._hideClone()}},hn&&tt(document,"touchmove",(function(e){(Dn.active||rn)&&e.cancelable&&e.preventDefault()})),Dn.utils={on:tt,off:nt,css:ct,find:dt,is:function(e,t){return!!it(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:xt,closest:it,toggleClass:st,clone:St,index:gt,nextTick:In,cancelNextTick:Pn,detectDirection:wn,getChild:mt},Dn.get=function(e){return e[kt]},Dn.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),s(t).call(t,(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Dn.utils=Ke(Ke({},Dn.utils),e.utils)),Tt.mount(e)}))},Dn.create=function(e,t){return new Dn(e,t)},Dn.version="1.15.0";var An,Rn,Mn,On,Ln,Fn,zn=[],Un=!1;function Kn(){s(zn).call(zn,(function(e){clearInterval(e.pid)})),zn=[]}function Bn(){clearInterval(Fn)}var jn,Xn=xt((function(e,t,n,o){if(t.scroll){var a,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=pt(),u=!1;Rn!==n&&(Rn=n,Kn(),An=t.scroll,a=t.scrollFn,!0===An&&(An=wt(n,!0)));var d=0,p=An;do{var f=p,h=ft(f),m=h.top,v=h.bottom,g=h.left,b=h.right,w=h.width,y=h.height,x=void 0,E=void 0,S=f.scrollWidth,C=f.scrollHeight,D=ct(f),k=f.scrollLeft,N=f.scrollTop;f===c?(x=w<S&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),E=y<C&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(x=w<S&&("auto"===D.overflowX||"scroll"===D.overflowX),E=y<C&&("auto"===D.overflowY||"scroll"===D.overflowY));var _=x&&(Math.abs(b-i)<=l&&k+w<S)-(Math.abs(g-i)<=l&&!!k),T=E&&(Math.abs(v-r)<=l&&N+y<C)-(Math.abs(m-r)<=l&&!!N);if(!zn[d])for(var I=0;I<=d;I++)zn[I]||(zn[I]={});zn[d].vx==_&&zn[d].vy==T&&zn[d].el===f||(zn[d].el=f,zn[d].vx=_,zn[d].vy=T,clearInterval(zn[d].pid),0==_&&0==T||(u=!0,zn[d].pid=setInterval(function(){o&&0===this.layer&&Dn.active._onTouchMove(Ln);var t=zn[this.layer].vy?zn[this.layer].vy*s:0,n=zn[this.layer].vx?zn[this.layer].vx*s:0;"function"==typeof a&&"continue"!==a.call(Dn.dragged.parentNode[kt],n,t,e,Ln,zn[this.layer].el)||Et(zn[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&p!==c&&(p=wt(p,!1)));Un=u}}),30),qn=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||a;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(u)&&(i("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Yn(){}function Hn(){}Yn.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=mt(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:qn},Xe(Yn,{pluginName:"revertOnSpill"}),Hn.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:qn},Xe(Hn,{pluginName:"removeOnSpill"});var $n,Wn,Gn,Jn,Vn,Qn=[],Zn=[],eo=!1,to=!1,no=!1;function oo(e,t){s(Zn).call(Zn,(function(n,o){var a=t.children[n.sortableIndex+(e?Number(o):0)];a?t.insertBefore(n,a):t.appendChild(n)}))}function ao(){s(Qn).call(Qn,(function(e){e!==Gn&&e.parentNode&&e.parentNode.removeChild(e)}))}Dn.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?tt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?tt(document,"pointermove",this._handleFallbackAutoScroll):t.touches?tt(document,"touchmove",this._handleFallbackAutoScroll):tt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?nt(document,"dragover",this._handleAutoScroll):(nt(document,"pointermove",this._handleFallbackAutoScroll),nt(document,"touchmove",this._handleFallbackAutoScroll),nt(document,"mousemove",this._handleFallbackAutoScroll)),Bn(),Kn(),clearTimeout(rt),rt=void 0},nulling:function(){Ln=Rn=An=Un=Fn=Mn=On=null,zn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(o,a);if(Ln=e,t||this.options.forceAutoScrollFallback||Ge||We||Ve){Xn(e,this.options,i,t);var r=wt(i,!0);!Un||Fn&&o===Mn&&a===On||(Fn&&Bn(),Fn=setInterval((function(){var i=wt(document.elementFromPoint(o,a),!0);i!==r&&(r=i,Kn()),Xn(e,n.options,i,t)}),10),Mn=o,On=a)}else{if(!this.options.bubbleScroll||wt(i,!0)===pt())return void Kn();Xn(e,this.options,wt(i,!1),!1)}}},Xe(e,{pluginName:"scroll",initializeByDefault:!0})}),Dn.mount(Hn,Yn);var io=Object.freeze({__proto__:null,default:Dn,MultiDrag:function(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.avoidImplicitDeselect||(e.options.supportPointer?tt(document,"pointerup",this._deselectMultiDrag):(tt(document,"mouseup",this._deselectMultiDrag),tt(document,"touchend",this._deselectMultiDrag))),tt(document,"keydown",this._checkKeyDown),tt(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(t,n){var o="";Qn.length&&Wn===e?s(Qn).call(Qn,(function(e,t){o+=(t?", ":"")+e.textContent})):o=n.textContent,t.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;Gn=t},delayEnded:function(){this.isMultiDrag=~u(Qn).call(Qn,Gn)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var o=0;o<Qn.length;o++)Zn.push(St(Qn[o])),Zn[o].sortableIndex=Qn[o].sortableIndex,Zn[o].draggable=!1,Zn[o].style["will-change"]="",st(Zn[o],this.options.selectedClass,!1),Qn[o]===Gn&&st(Zn[o],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,o=e.dispatchSortableEvent,a=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Qn.length&&Wn===t&&(oo(!0,n),o("clone"),a()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,o=e.cancel;this.isMultiDrag&&(oo(!1,n),s(Zn).call(Zn,(function(e){ct(e,"display","")})),t(),Vn=!1,o())},hideClone:function(e){var t=this;e.sortable;var n=e.cloneNowHidden,o=e.cancel;this.isMultiDrag&&(s(Zn).call(Zn,(function(e){ct(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),Vn=!0,o())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&Wn&&Wn.multiDrag._deselectMultiDrag(),s(Qn).call(Qn,(function(e){e.sortableIndex=gt(e)})),Qn=G(Qn).call(Qn,(function(e,t){return e.sortableIndex-t.sortableIndex})),no=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(G(this.options)&&(n.captureAnimationState(),this.options.animation)){s(Qn).call(Qn,(function(e){e!==Gn&&ct(e,"position","absolute")}));var o=ft(Gn,!1,!0,!0);s(Qn).call(Qn,(function(e){e!==Gn&&Ct(e,o)})),to=!0,eo=!0}n.animateAll((function(){to=!1,eo=!1,t.options.animation&&s(Qn).call(Qn,(function(e){Dt(e)})),G(t.options)&&ao()}))}},dragOver:function(e){var t=e.target,n=e.completed,o=e.cancel;to&&~u(Qn).call(Qn,t)&&(n(!1),o())},revert:function(e){var t=e.fromSortable,n=e.rootEl,o=e.sortable,a=e.dragRect;Qn.length>1&&(s(Qn).call(Qn,(function(e){o.addAnimationState({target:e,rect:to?ft(e):a}),Dt(e),e.fromRect=a,t.removeAnimationState(e)})),to=!1,function(e,t){s(Qn).call(Qn,(function(n,o){var a=t.children[n.sortableIndex+(e?Number(o):0)];a?t.insertBefore(n,a):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,o=e.insertion,a=e.activeSortable,i=e.parentEl,r=e.putSortable,l=this.options;if(o){if(n&&a._hideClone(),eo=!1,l.animation&&Qn.length>1&&(to||!n&&!G(a.options)&&!r)){var c=ft(Gn,!1,!0,!0);s(Qn).call(Qn,(function(e){e!==Gn&&(Ct(e,c),i.appendChild(e))})),to=!0}if(!n)if(to||ao(),Qn.length>1){var u=Vn;a._showClone(t),a.options.animation&&!Vn&&u&&s(Zn).call(Zn,(function(e){a.addAnimationState({target:e,rect:Jn}),e.fromRect=Jn,e.thisAnimationDuration=null}))}else a._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,o=e.activeSortable;if(s(Qn).call(Qn,(function(e){e.thisAnimationDuration=null})),o.options.animation&&!n&&o.multiDrag.isMultiDrag){Jn=Xe({},t);var a=ut(Gn,!0);Jn.top-=a.f,Jn.left-=a.e}},dragOverAnimationComplete:function(){to&&(to=!1,ao())},drop:function(e){var t=e.originalEvent,n=e.rootEl,o=e.parentEl,a=e.sortable,i=e.dispatchSortableEvent,r=e.oldIndex,l=e.putSortable,d=l||this.sortable;if(t){var p=this.options,f=o.children;if(!no)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),st(Gn,p.selectedClass,!~u(Qn).call(Qn,Gn)),~u(Qn).call(Qn,Gn))c(Qn).call(Qn,u(Qn).call(Qn,Gn),1),$n=null,It({sortable:a,rootEl:n,name:"deselect",targetEl:Gn,originalEvent:t});else{if(Qn.push(Gn),It({sortable:a,rootEl:n,name:"select",targetEl:Gn,originalEvent:t}),t.shiftKey&&$n&&a.el.contains($n)){var h,m,v=gt($n),g=gt(Gn);if(~v&&~g&&v!==g)for(g>v?(m=v,h=g):(m=g,h=v+1);m<h;m++)~u(Qn).call(Qn,f[m])||(st(f[m],p.selectedClass,!0),Qn.push(f[m]),It({sortable:a,rootEl:n,name:"select",targetEl:f[m],originalEvent:t}))}else $n=Gn;Wn=d}if(no&&this.isMultiDrag){if(to=!1,(G(o[kt].options)||o!==n)&&Qn.length>1){var b=ft(Gn),w=gt(Gn,":not(."+this.options.selectedClass+")");if(!eo&&p.animation&&(Gn.thisAnimationDuration=null),d.captureAnimationState(),!eo&&(p.animation&&(Gn.fromRect=b,s(Qn).call(Qn,(function(e){if(e.thisAnimationDuration=null,e!==Gn){var t=to?ft(e):b;e.fromRect=t,d.addAnimationState({target:e,rect:t})}}))),ao(),s(Qn).call(Qn,(function(e){f[w]?o.insertBefore(e,f[w]):o.appendChild(e),w++})),r===gt(Gn))){var y=!1;s(Qn).call(Qn,(function(e){e.sortableIndex===gt(e)||(y=!0)})),y&&i("update")}s(Qn).call(Qn,(function(e){Dt(e)})),d.animateAll()}Wn=d}(n===o||l&&"clone"!==l.lastPutMode)&&s(Zn).call(Zn,(function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=no=!1,Zn.length=0},destroyGlobal:function(){this._deselectMultiDrag(),nt(document,"pointerup",this._deselectMultiDrag),nt(document,"mouseup",this._deselectMultiDrag),nt(document,"touchend",this._deselectMultiDrag),nt(document,"keydown",this._checkKeyDown),nt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==no&&no||Wn!==this.sortable||e&&it(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;Qn.length;){var t=Qn[0];st(t,this.options.selectedClass,!1),Qn.shift(),It({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Xe(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[kt];t&&t.options.multiDrag&&!~u(Qn).call(Qn,e)&&(Wn&&Wn!==t&&(Wn.multiDrag._deselectMultiDrag(),Wn=t),st(e,t.options.selectedClass,!0),Qn.push(e))},deselect:function(e){var t=e.parentNode[kt],n=u(Qn).call(Qn,e);t&&t.options.multiDrag&&~n&&(st(e,t.options.selectedClass,!1),c(Qn).call(Qn,n,1))}},eventProperties:function(){var e,t=this,n=[],o=[];return s(Qn).call(Qn,(function(e){var a;n.push({multiDragElement:e,index:e.sortableIndex}),a=to&&e!==Gn?-1:to?gt(e,":not(."+t.options.selectedClass+")"):gt(e),o.push({multiDragElement:e,index:a})})),{items:Ye(Qn),clones:x(e=[]).call(e,Zn),oldIndicies:n,newIndicies:o}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})},Sortable:Dn,Swap:function(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;jn=t},dragOverValid:function(e){var t=e.completed,n=e.target,o=e.onMove,a=e.activeSortable,i=e.changed,r=e.cancel;if(a.options.swap){var l=this.sortable.el,s=this.options;if(n&&n!==l){var c=jn;!1!==o(n)?(st(n,s.swapClass,!0),jn=n):jn=null,c&&c!==jn&&st(c,s.swapClass,!1)}i(),t(!0),r()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,o=e.dragEl,a=n||this.sortable,i=this.options;jn&&st(jn,i.swapClass,!1),jn&&(i.swap||n&&n.options.swap)&&o!==jn&&(a.captureAnimationState(),a!==t&&t.captureAnimationState(),function(e,t){var n,o,a=e.parentNode,i=t.parentNode;a&&i&&!a.isEqualNode(t)&&!i.isEqualNode(e)&&(n=gt(e),o=gt(t),a.isEqualNode(i)&&n<o&&o++,a.insertBefore(t,a.children[n]),i.insertBefore(e,i.children[o]))}(o,jn),a.animateAll(),a!==t&&t.animateAll())},nulling:function(){jn=null}},Xe(e,{pluginName:"swap",eventProperties:function(){return{swapItem:jn}}})}}),ro="Invariant failed",lo=Object.freeze({__proto__:null,default:function(e,t){if(!e){var n="function"==typeof t?t():t;throw new Error(n?ro+": "+n:ro)}}}),so=d(io),co=d(lo),uo=["list","setList","children","tag","style","className","clone","onAdd","onChange","onChoose","onClone","onEnd","onFilter","onRemove","onSort","onStart","onUnchoose","onUpdate","onMove","onSpill","onSelect","onDeselect"];function po(e){var t=function(){if("undefined"==typeof Reflect||!k)return!1;if(k.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(k(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=N(e);if(t){var a=N(this).constructor;n=k(o,arguments,a)}else n=o.apply(this,arguments);return _(this,n)}}function fo(e,t){var n=w(e);if(I){var o=I(e);t&&(o=l(o).call(o,(function(t){return D(e,t).enumerable}))),n.push.apply(n,o)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n,o,a=null!=arguments[t]?arguments[t]:{};t%2?s(n=fo(Object(a),!0)).call(n,(function(t){b(e,t,a[t])})):S?C(e,S(a)):s(o=fo(Object(a))).call(o,(function(t){E(e,t,D(a,t))}))}return e}var mo=p((function(e){function t(e){return e&&e.__esModule?e.default:e}function n(e,t,n,o){E(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function a(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function i(e){s(e).call(e,(function(e){return a(e.element)}))}function r(e){s(e).call(e,(function(e){!function(e,t,n){var o=e.children[n]||null;e.insertBefore(t,o)}(e.parentElement,e.element,e.oldIndex)}))}function u(e,t){var n,o=S(e),a={parentElement:e.from},i=[];switch(o){case"normal":i=[{element:e.item,newIndex:e.newIndex,oldIndex:e.oldIndex,parentElement:e.from}];break;case"swap":i=[ho({element:e.item,oldIndex:e.oldIndex,newIndex:e.newIndex},a),ho({element:e.swapItem,oldIndex:e.newIndex,newIndex:e.oldIndex},a)];break;case"multidrag":i=m(n=e.oldIndicies).call(n,(function(t,n){return ho({element:t.multiDragElement,oldIndex:t.index,newIndex:e.newIndicies[n].index},a)}))}var r=function(e,t){var n;return G(n=m(e).call(e,(function(e){return ho(ho({},e),{},{item:t[e.oldIndex]})}))).call(n,(function(e,t){return e.oldIndex-t.oldIndex}))}(i,t);return r}function d(e,t){var n,o,a=J(t);return s(n=Z(o=x(e).call(e)).call(o)).call(n,(function(e){return c(a).call(a,e.oldIndex,1)})),a}function p(e,t,n,o){var a=J(t);return s(e).call(e,(function(e){var t=o&&n&&o(e.item,n);c(a).call(a,e.newIndex,0,t||e.item)})),a}function S(e){return e.oldIndicies&&e.oldIndicies.length>0?"multidrag":e.swapItem?"swap":"normal"}n(e.exports,"Sortable",(function(){return $882b6d93070905b3$re_export$Sortable})),n(e.exports,"Direction",(function(){return $882b6d93070905b3$re_export$Direction})),n(e.exports,"DOMRect",(function(){return $882b6d93070905b3$re_export$DOMRect})),n(e.exports,"GroupOptions",(function(){return $882b6d93070905b3$re_export$GroupOptions})),n(e.exports,"MoveEvent",(function(){return $882b6d93070905b3$re_export$MoveEvent})),n(e.exports,"Options",(function(){return $882b6d93070905b3$re_export$Options})),n(e.exports,"PullResult",(function(){return $882b6d93070905b3$re_export$PullResult})),n(e.exports,"PutResult",(function(){return $882b6d93070905b3$re_export$PutResult})),n(e.exports,"SortableEvent",(function(){return $882b6d93070905b3$re_export$SortableEvent})),n(e.exports,"SortableOptions",(function(){return $882b6d93070905b3$re_export$SortableOptions})),n(e.exports,"Utils",(function(){return $882b6d93070905b3$re_export$Utils})),n(e.exports,"ReactSortable",(function(){return _}));var C,D,k,N={dragging:null},_=function(e){f(E,e);var n=po(E);function E(e){var a,i;h(this,E),(i=n.call(this,e)).ref=(0,o.createRef)();var r=m(a=J(e.list)).call(a,(function(e){return v(e,{chosen:!1,selected:!1})}));return e.setList(r,i.sortable,N),t(co)(!e.plugins,'\nPlugins prop is no longer supported.\nInstead, mount it with "Sortable.mount(new MultiDrag())"\nPlease read the updated README.md at https://github.com/SortableJS/react-sortablejs.\n      '),i}return g(E,[{key:"componentDidMount",value:function(){if(null!==this.ref.current){var e=this.makeOptions();t(so).create(this.ref.current,e)}}},{key:"componentDidUpdate",value:function(e){e.disabled!==this.props.disabled&&this.sortable&&this.sortable.option("disabled",this.props.disabled)}},{key:"render",value:function(){var e=this.props,t=e.tag,n={style:e.style,className:e.className,id:e.id},a=t&&null!==t?t:"div";return(0,o.createElement)(a,ho({ref:this.ref},n),this.getChildren())}},{key:"getChildren",value:function(){var e,n=this.props,a=n.children,i=n.dataIdAttr,r=n.selectedClass,s=void 0===r?"sortable-selected":r,c=n.chosenClass,u=void 0===c?"sortable-chosen":c;n.dragClass,n.fallbackClass,n.ghostClass,n.swapClass;var d=l(n),p=void 0===d?"sortable-filter":d,f=n.list;if(!a||null==a)return null;var h=i||"data-id";return m(e=o.Children).call(e,a,(function(e,n){var a,i;if(void 0!==e){var r=f[n]||{},l=e.props.className,c="string"==typeof p&&b({},p.replace(".",""),!!r.filtered),d=t(T)(l,ho((b(a={},s,r.selected),b(a,u,r.chosen),a),c));return(0,o.cloneElement)(e,(b(i={},h,e.key),b(i,"className",d),i))}}))}},{key:"sortable",get:function(){var e,t=this.ref.current;if(null===t)return null;var n=V(e=w(t)).call(e,(function(e){return Q(e).call(e,"Sortable")}));return n?t[n]:null}},{key:"makeOptions",value:function(){var e,t=this,n=["onAdd","onChoose","onDeselect","onEnd","onRemove","onSelect","onSpill","onStart","onUnchoose","onUpdate"],o=["onChange","onClone","onFilter","onSort"],a=((e=this.props).list,e.setList,e.children,e.tag,e.style,e.className,e.clone,e.onAdd,e.onChange,e.onChoose,e.onClone,e.onEnd,e.onFilter,e.onRemove,e.onSort,e.onStart,e.onUnchoose,e.onUpdate,e.onMove,e.onSpill,e.onSelect,e.onDeselect,y(e,uo));return s(n).call(n,(function(e){return a[e]=t.prepareOnHandlerPropAndDOM(e)})),s(o).call(o,(function(e){return a[e]=t.prepareOnHandlerProp(e)})),ho(ho({},a),{},{onMove:function(e,n){var o=t.props.onMove,a=e.willInsertAfter||-1;if(!o)return a;var i=o(e,n,t.sortable,N);return void 0!==i&&i}})}},{key:"prepareOnHandlerPropAndDOM",value:function(e){var t=this;return function(n){t.callOnHandlerProp(n,e),t[e](n)}}},{key:"prepareOnHandlerProp",value:function(e){var t=this;return function(n){t.callOnHandlerProp(n,e)}}},{key:"callOnHandlerProp",value:function(e,t){var n=this.props[t];n&&n(e,this.sortable,N)}},{key:"onAdd",value:function(e){var t,n=this.props,o=n.list,a=n.setList,r=n.clone,l=u(e,J(N.dragging.props.list));i(l),a(m(t=p(l,o,e,r)).call(t,(function(e){return v(e,{selected:!1})})),this.sortable,N)}},{key:"onRemove",value:function(e){var n,o=this,a=this.props,l=a.list,p=a.setList,f=S(e),h=u(e,l);r(h);var g=J(l);if("clone"!==e.pullMode)g=d(h,g);else{var b=h;switch(f){case"multidrag":b=m(h).call(h,(function(t,n){return ho(ho({},t),{},{element:e.clones[n]})}));break;case"normal":b=m(h).call(h,(function(t){return ho(ho({},t),{},{element:e.clone})}));break;default:t(co)(!0,x(n='mode "'.concat(f,'" cannot clone. Please remove "props.clone" from <ReactSortable/> when using the "')).call(n,f,'" plugin'))}i(b),s(h).call(h,(function(t){var n=t.oldIndex,a=o.props.clone(t.item,e);c(g).call(g,n,1,a)}))}p(g=m(g).call(g,(function(e){return v(e,{selected:!1})})),this.sortable,N)}},{key:"onUpdate",value:function(e){var t=this.props,n=t.list,o=t.setList,a=u(e,n);i(a),r(a);var l=function(e,t){return p(e,d(e,t))}(a,n);return o(l,this.sortable,N)}},{key:"onStart",value:function(){N.dragging=this}},{key:"onEnd",value:function(){N.dragging=null}},{key:"onChoose",value:function(e){var t=this.props,n=t.list,o=t.setList,a=m(n).call(n,(function(t,n){var o=t;return n===e.oldIndex&&(o=v(t,{chosen:!0})),o}));o(a,this.sortable,N)}},{key:"onUnchoose",value:function(e){var t=this.props,n=t.list,o=t.setList,a=m(n).call(n,(function(t,n){var o=t;return n===e.oldIndex&&(o=v(o,{chosen:!1})),o}));o(a,this.sortable,N)}},{key:"onSpill",value:function(e){var t=this.props,n=t.removeOnSpill,o=t.revertOnSpill;n&&!o&&a(e.item)}},{key:"onSelect",value:function(e){var t,n=this.props,o=n.list,a=n.setList,i=m(o).call(o,(function(e){return v(e,{selected:!1})}));s(t=e.newIndicies).call(t,(function(t){var n,o=t.index;if(-1===o)return console.log(x(n='"'.concat(e.type,'" had indice of "')).call(n,t.index,"\", which is probably -1 and doesn't usually happen here.")),void console.log(e);i[o].selected=!0})),a(i,this.sortable,N)}},{key:"onDeselect",value:function(e){var t,n=this.props,o=n.list,a=n.setList,i=m(o).call(o,(function(e){return v(e,{selected:!1})}));s(t=e.newIndicies).call(t,(function(e){var t=e.index;-1!==t&&(i[t].selected=!0)})),a(i,this.sortable,N)}}]),E}(o.Component);b(_,"defaultProps",{clone:function(e){return e}}),C=e.exports,s(k=w(D={})).call(k,(function(e){"default"===e||"__esModule"===e||C.hasOwnProperty(e)||E(C,e,{enumerable:!0,get:function(){return D[e]}})}))})),vo=ue.t,go=function(e){var t=e.visible,n=e.fileList,i=void 0===n?[]:n,r=e.batchList,s=void 0===r?[]:r,c=e.onClose,u=e.onDownload;e.onRemove;var d=e.onPreview,p=e.disabledDownload;e.disabledPreview;var f=e.disabledRemove,h=e.showPreview,v=e.showDownload,g=e.showRemove,b=e.onSelect,w=e.onChange,y=M.exports.useState(!1),E=ee(y,2),S=E[0],C=E[1],D=M.exports.useState(i),k=ee(D,2),N=k[0],_=k[1],I=(null==s?void 0:s.length)===(null==i?void 0:i.length);return M.exports.useEffect((function(){t&&_(i)}),[te(i),t]),o.createElement(o.Fragment,null,o.createElement(U,{visible:t,bodyStyle:{height:"100vh"}},o.createElement("div",{className:"upload-batch-wrap"},o.createElement(ne,{className:"bacth-navbar",backArrow:!1,left:o.createElement("span",{className:"navbar-select",onClick:function(){null==b||b(I?[]:i)}},I?"取消全部":"选择全部"),right:o.createElement("span",{className:"navbar-done",onClick:function(){null==w||w(N),null==c||c()}},"完成")},"批量操作"),o.createElement("div",{className:"upload-batch-list"},o.createElement(q,{lines:!0},o.createElement(mo.ReactSortable,{list:N,setList:function(e){e.length>0&&_(e)},handle:".drag-icon"},null==N?void 0:m(N).call(N,(function(e){var t;return o.createElement(q.Item,{key:null==e?void 0:e.storageKey,lines:!0,className:T("upload-list-item"),prefix:o.createElement(oe,{checked:(null==s||null===(t=l(s).call(s,(function(t){return(null==t?void 0:t.storageKey)===(null==e?void 0:e.storageKey)})))||void 0===t?void 0:t.length)>0,onChange:function(t){return function(e,t){if(e){var n;null==b||b(x(n=[]).call(n,J(s),[t]))}else{var o=l(s).call(s,(function(e){return e.storageKey!==(null==t?void 0:t.storageKey)}));null==b||b(o)}}(t,e)}})},Oe(K(B(e.name)),48),o.createElement("div",{className:"list-item-content"},o.createElement("div",{className:T("list-item-title")},B(e.name)),o.createElement("div",{className:T("list-item-size")},j(e.size)),o.createElement("div",{className:T("list-item-other")},null!=e&&e.createUserName?"来自".concat(null==e?void 0:e.createUserName,"."):"",X(null==e?void 0:e.creatTime))),o.createElement("div",{className:"list-item-icon"},h&&o.createElement(a,{name:"LinedEye",style:{color:"var(--text-ultraweak, #C9CDD4)",fontSize:"20px",marginRight:16},onClick:function(){return null==d?void 0:d(e)}}),o.createElement(a,{className:"drag-icon",name:"LinedDragA",style:{color:"var(--text-ultraweak, #C9CDD4)",fontSize:"20px"}})))}))))),o.createElement("div",{className:"upload-batch-bottom"},g&&o.createElement(ae,{className:T("batch-btn",f?"disabled":""),btnType:"link",size:"large",danger:!0,onClick:function(){f?ie.show({content:vo({k:"common.ui.upload.disabled.delete",d:"删除操作被禁用！"}),icon:o.createElement(a,{name:"Linedtermination"})}):0!==(null==s?void 0:s.length)?C(!0):ie.show({content:"至少选择一项"})}},"删除"),v&&o.createElement(ae,{className:T("batch-btn",p?"disabled":""),btnType:"link",size:"large",onClick:function(){null==u||u({})}},"下载")))),o.createElement(re,{visible:S,extra:o.createElement("span",null,"确定删除？"),actions:[{text:"删除",key:"delete",danger:!0,onClick:function(){var e=l(N).call(N,(function(e){return-1===(null==s?void 0:le(s).call(s,(function(t){return(null==e?void 0:e.storageKey)===(null==t?void 0:t.storageKey)})))}));_(e),C(!1)}},{text:"取消",key:"cancel",onClick:function(){return C(!1)}}],onClose:function(){return C(!1)}}))};function bo(e){return wo.apply(this,arguments)}function wo(){return(wo=pe(fe.mark((function e(t){var n,o,a,i,r,l,s;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appName.replace(/\b(-\w)/g,(function(e){return e.substring(1).toUpperCase()})),o=t.fileName,a=t.isPublic,i=t.metadata,r=_e(t.appName),l=r.queryLoader,e.next=5,l.load({showLoading:!1,fieldType:"".concat(n,"FileUploadSignGet"),paramsType:"".concat(n,"FileUploadSignGetInputQuery"),paramsKey:"query",showError:!1,params:{appName:t.appName,fileName:o,isPublic:a,metadata:i},queryFields:"content{\n      expire\n      formData\n      host\n      method\n      headerData\n      storageKey\n    }"});case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yo(e){return xo.apply(this,arguments)}function xo(){return(xo=pe(fe.mark((function e(t){var n,o,a,i,r;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.appName.replace(/\b(-\w)/g,(function(e){return e.substring(1).toUpperCase()})),n=t.fileName,o=t.isPublic,a=t.metadata,i=t.headerData,r=Te.get("/".concat(t.appName,"/file/qr-upload-sign"),{appName:t.appName,fileName:n,isPublic:o,metadata:a,qrCodeUploadToken:i}),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eo(e){return So.apply(this,arguments)}function So(){return(So=pe(fe.mark((function e(t){var n,o,a,i,r,l,s,c,u,d,p,f,h,m;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appName.replace(/\b(-\w)/g,(function(e){return e.substring(1).toUpperCase()})),o=t.createTime,a=t.createUserId,i=t.fileName,r=t.fileSize,l=t.id,s=t.isPublic,c=t.md5,u=t.metadata,d=t.mimeType,p=t.storageKey,f=_e(t.appName),h=f.mutationLoader,e.next=5,h.load({showLoading:!1,fieldType:"".concat(n,"FileSavePost"),paramsType:"".concat(n,"FileSavePostInputBody"),paramsKey:"body",params:{createTime:o,createUserId:a,fileName:i,fileSize:r,id:l,isPublic:s,appName:t.appName,md5:c,metadata:u,mimeType:d,storageKey:p},queryFields:"content{\n      createTime\n      createUserId\n      fileName\n      fileSize\n      id\n      isPublic\n      appName\n      md5\n      metadata\n      mimeType\n      storageKey\n    }"});case 5:return m=e.sent,e.abrupt("return",m);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Co(e,t){var n=w(e);if(I){var o=I(e);t&&(o=l(o).call(o,(function(t){return D(e,t).enumerable}))),n.push.apply(n,o)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n,o,a=null!=arguments[t]?arguments[t]:{};t%2?s(n=Co(Object(a),!0)).call(n,(function(t){b(e,t,a[t])})):S?C(e,S(a)):s(o=Co(Object(a))).call(o,(function(t){E(e,t,D(a,t))}))}return e}var ko=ue.t,No=function(e){var n=e.fileList,i=void 0===n?[]:n,r=e.onRemove,l=e.fileType,s=e.onReUpload,c=e.onAbort,u=e.lines,d=void 0===u?"full":u,p=e.showUploadList,f=void 0===p||p,h=e.appName,v=void 0===h?"":h;e.showBatchDownload,e.size;var g=e.showDownload,b=e.showPreview,w=e.disabledRemove,y=e.disabledDownload,x=e.disabledPreview,E=e.showRemove,S=e.onChange,C=M.exports.useState(!1),D=ee(C,2),k=D[0],N=D[1],_=M.exports.useState(!1),I=ee(_,2),P=I[0],A=I[1],R=M.exports.useState([]),O=ee(R,2),L=O[0],F=O[1],z=M.exports.useState(null),U=ee(z,2),K=U[0],B=U[1],j=function(){var e=pe(fe.mark((function e(t){return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!1),b){e.next=4;break}return ie.show({icon:o.createElement(a,{name:"Linedtermination"}),content:ko({k:"common.ui.upload.notsupport.preview",d:"不支持预览！"})}),e.abrupt("return");case 4:if(!x){e.next=7;break}return ie.show({icon:o.createElement(a,{name:"Linedtermination"}),content:ko({k:"common.ui.upload.disabled.preview",d:"预览操作被禁用！"})}),e.abrupt("return");case 7:Ie({disabledDownload:y,disabledPreview:x,showDownload:g,appName:v,file:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=pe(fe.mark((function e(t){return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!1),!y){e.next=4;break}return ie.show({content:ko({k:"common.ui.upload.disabled.download",d:"下载操作被禁用！"}),icon:o.createElement(a,{name:"Linedtermination"})}),e.abrupt("return");case 4:if(0!==(null==t?void 0:t.length)){e.next=7;break}return ie.show({content:"至少选择一项"}),e.abrupt("return");case 7:Pe({appName:v,fileList:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){N(!1),w?ie.show({content:ko({k:"common.ui.upload.disabled.delete",d:"删除操作被禁用！"}),icon:o.createElement(a,{name:"Linedtermination"})}):e&&Array.isArray(e)&&0===(null==e?void 0:e.length)?ie.show({content:"至少选择一项"}):null==r||r(e)},Y=function(e){N(!k),k||B(e)},H=function(){A(!P),F([])};return o.createElement(o.Fragment,null,f&&(i.length>0||"image"===l)&&o.createElement("div",{id:"list",className:T("file-list-wrapper","image"===l?"img-list":"file-list")},m(i).call(i,(function(t,n){return o.createElement(_o,Do(Do({},e),{},{key:n,file:t,onPreview:function(){return j(t)},onDownload:function(){return X([t])},onRemove:function(){return q(t)},fileType:l,onAbort:c,onReUpload:s,lines:d,onMoreClick:function(){return Y(t)}}))})),e.children?e.children:null),o.createElement(t,{visible:k,onClose:function(){Y(null)},file:K,disabledDownload:y,disabledPreview:x,disabledRemove:w,showDownload:g,showPreview:b,showRemove:E,onPreview:function(){return j(K)},onDownload:function(){return X([K])},onRemove:function(){return q(K)}}),o.createElement(go,{visible:P,fileList:i,batchList:L,disabledDownload:y,disabledPreview:x,disabledRemove:w,showDownload:g,showPreview:b,showRemove:E,onPreview:function(e){return j(e)},onDownload:function(){return X(L)},onRemove:function(){return q(L)},onClose:H,onSelect:function(e){F(e)},onChange:function(e){null==S||S({file:null==e?void 0:e[0],fileList:e})}}),f&&i.length>0&&o.createElement("div",{className:"batch-download-btn"},o.createElement(ae,{size:"mini",btnType:"default",icon:"LinedListChecked",style:{margin:"6px 0 0"},onClick:H},ko({k:"common.mui.upload.batch.btn",d:"批量操作"}))))},_o=function(e){var t=e.file,n=e.onRemove,i=e.onPreview;e.onDownload;var r=e.showProgress,l=void 0===r||r;e.onReUpload,e.onAbort;var s=e.showSize,c=e.showDownload,u=void 0===c||c,d=e.showRemove,p=void 0===d||d,f=e.showPreview,h=void 0===f||f,m=e.appName;e.disabledRemove,e.disabledDownload,e.disabledPreview;var v=e.onMoreClick,g=e.readonlyFontSize,b=function(e){return"string"==typeof e?e:""},w=g?{fontSize:"".concat(g,"px")}:{};return"image"===e.fileType&&"removed"!==t.status?o.createElement("div",{className:"img-item",style:{borderColor:"error"===t.status||"abort"===t.status?"red":"rgba(0, 0, 0, 0.25)",border:"done"===t.status?"none":"1px dashed rgba(0, 0, 0, 0.25)"}},"done"===t.status?Ae.test(t.name)?o.createElement(Le,{src:(null==t?void 0:t.url)||"",className:T("img"),storageKey:null==t?void 0:t.storageKey,appName:m,onClick:function(){return null==i?void 0:i()}}):o.createElement("div",{className:T("image-file"),onClick:function(){return null==i?void 0:i()}},o.cloneElement(Oe(K(null==t?void 0:t.name)),{style:{fontSize:"24px"}}),o.createElement("div",{className:"file-name"},b(t.name)),o.createElement("div",{className:"file-size"},j(t.size))):o.createElement("div",{className:"progress "},o.createElement(Fe,{style:{"--size":"48px"},percent:t.percent})),p&&o.createElement(a,{className:"del-file-icon",name:"FilledCloseCircle",onClick:function(){null==n||n(t)}})):"image"===e.fileType&&"removed"===t.status||"file"!==e.fileType||"done"!==t.status&&"uploading"!==t.status?null:o.createElement(q.Item,{lines:!1,className:T("upload-list-item"),prefix:o.cloneElement(Oe(K(null==t?void 0:t.name)),{className:"file-icon"})},o.createElement("div",{className:"list-item-content",onClick:function(){return null==i?void 0:i()}},o.createElement("div",{className:T("list-item-title"),style:w},b(t.name)),s&&o.createElement("div",{className:T("list-item-description")},j(t.size))),o.createElement("div",{className:"list-item-icon"},l&&"uploading"===t.status&&o.createElement(Fe,{percent:50,style:{"--size":"20px"}}),u||p||h?"done"===t.status&&o.createElement(a,{name:"LinedMore",className:"down-icon",onClick:function(e){e.stopPropagation(),null==v||v()}}):null))};function To(e,t){var n=w(e);if(I){var o=I(e);t&&(o=l(o).call(o,(function(t){return D(e,t).enumerable}))),n.push.apply(n,o)}return n}function Io(e){for(var t=1;t<arguments.length;t++){var n,o,a=null!=arguments[t]?arguments[t]:{};t%2?s(n=To(Object(a),!0)).call(n,(function(t){b(e,t,a[t])})):S?C(e,S(a)):s(o=To(Object(a))).call(o,(function(t){E(e,t,D(a,t))}))}return e}var Po=ue.t;function Ao(){return(Ao=pe(fe.mark((function e(t){var n,o,a,i,r,l,s;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new FormData,i=u(n=navigator.userAgent).call(n,"m5shell")>=0,a.append("isPublic",null==t?void 0:t.isPublic),a.append("metadata",null==t?void 0:t.metadata),i?(r=new File([t.file],t.file.name,{type:t.file.type}),a.append(null==t?void 0:t.filename,r,t.file.name)):a.append(null==t?void 0:t.filename,null==t?void 0:t.file,t.file.name),a.append("createUserName",Re()),a.append("createDeptName",Me()),null!=t&&t.qrCodeUploadToken&&a.append("qrCodeUploadToken",null==t?void 0:t.qrCodeUploadToken),l=x(o="".concat(location.protocol)).call(o,window.__SY_STATIC_WS_ORIGIN__),!i){e.next=11;break}return e.abrupt("return",Lo(Io(Io({},t),{},{headers:"",action:x(s="".concat(l,"/")).call(s,t.appName,"/file/upload"),file:t.file,method:"post"})));case 11:return e.abrupt("return",Te.post("/".concat(t.appName,"/file/upload"),a,{processData:!1,contentType:!1}).then((function(e){var n;if(null!=e&&null!==(n=e.data)&&void 0!==n&&n.content){var o,a,i=null==e||null===(o=e.data.content)||void 0===o?void 0:o[0];null===(a=t.onSuccess)||void 0===a||a.call(t,Io(Io({},i),{},{fileName:[null==i?void 0:i.fileName],name:[null==i?void 0:i.fileName],uid:[null==i?void 0:i.id],id:[null==i?void 0:i.id],storageKey:[null==i?void 0:i.storageKey],mimeType:[null==i?void 0:i.mimeType],size:["".concat(null==i?void 0:i.fileSize)],fileSize:["".concat(null==i?void 0:i.fileSize)],md5:[null==i?void 0:i.md5]}),"")}else{var r;null===(r=t.onError)||void 0===r||r.call(t,e)}})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(e,t,n){var o,a=u(o=navigator.userAgent).call(o,"m5shell")>=0,i=localStorage.getItem("fileConfig");i&&(i=JSON.parse(i)),n&&ie.show({content:Po({k:"common.ui.all.loading",d:"加载中"}),icon:"loading"}),s(t).call(t,(function(t){var n;t.file.uid===e.file.uid&&("backend"===(null===(n=i)||void 0===n?void 0:n.uploadMode)?function(e){Ao.apply(this,arguments)}(Io(Io({},e),t)):a?Lo(Io(Io({},e),t)):Oo(Io(Io({},e),t)))}))}function Mo(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(e){return t}}function Oo(e){var t,n=new XMLHttpRequest;e.onProgress&&n.upload&&(n.upload.onprogress=function(t){var n;t.total>0&&(t.percent=t.loaded/t.total*100),null==e||null===(n=e.onProgress)||void 0===n||n.call(e,t)});var o,a=e.file;"put"!==e.method&&(a=new FormData,e.data&&s(o=w(e.data)).call(o,(function(t){var n=e.data[t];Array.isArray(n)?s(n).call(n,(function(e){a.append("".concat(t,"[]"),e)})):a.append(t,e.data[t])})),e.file instanceof Blob?a.append(e.filename,e.file,e.file.name):a.append(e.filename,e.file)),n.onerror=function(t){var n;null===(n=e.onError)||void 0===n||n.call(e,t)},n.onload=function(){var t,o;if(n.status<200||n.status>=300)return null===(o=e.onError)||void 0===o?void 0:o.call(e,function(e,t){var n,o,a=x(n=x(o="cannot ".concat(e.method," ")).call(o,e.action," ")).call(n,t.status,"'"),i=new Error(a);return i.status=t.status,i.method=e.method,i.url=e.action,i}(e,n),Mo(n));if("put"===e.method){var a,i=n.getResponseHeader("etag"),r=i?i.replace(/^['|"](.*)['|"]$/,"$1"):"3254d";return null===(a=e.onSuccess)||void 0===a?void 0:a.call(e,Io({md5:[r]},Mo(n)),n)}return null===(t=e.onSuccess)||void 0===t?void 0:t.call(e,Mo(n),n)},n.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);var i=e.headers||{};return null!==i["X-Requested-With"]&&n.setRequestHeader("X-Requested-With","XMLHttpRequest"),s(t=w(i)).call(t,(function(e){null!==i[e]&&n.setRequestHeader(e,i[e])})),n.send(a),{abort:function(){n.abort()}}}function Lo(e){var t=e.action,n=e.headers,o=e.file,a=e.data,i=e.fileList,r=e.method;return window.jsSdk.http.upload({url:t,headers:n,fileList:i,params:a,requestId:o.id,method:r},(function(t){var n=t.pos,o=t.response;t.requestId;var a=t.responseHeader;if(e.onProgress&&e.onProgress({percent:n}),100===n)if("put"===r){var i,l,s,c=u(i=navigator.userAgent).call(i,"Android")>=0&&a?null==a||null===(l=a.etag)||void 0===l?void 0:l[0]:null==a?void 0:a.Etag;null==e||null===(s=e.onSuccess)||void 0===s||s.call(e,Io(Io({},o),{},{md5:c.replace(/\"/g)}))}else{var d,p,f,h,m=null==o||null===(d=o.data)||void 0===d||null===(p=d.content)||void 0===p?void 0:p[0];m?null==e||null===(f=e.onSuccess)||void 0===f||f.call(e,{fileName:[null==m?void 0:m.fileName],name:[null==m?void 0:m.fileName],uid:[null==m?void 0:m.id],storageKey:[null==m?void 0:m.storageKey],mimeType:[null==m?void 0:m.mimeType],size:["".concat(null==m?void 0:m.fileSize)],fileSize:["".concat(null==m?void 0:m.fileSize)],md5:[null==m?void 0:m.md5]}):null==e||null===(h=e.onError)||void 0===h||h.call(e,o)}}),(function(t){e.onError&&e.onError(t)})),{abort:function(){!function(e){var t=e.file;window.jsSdk.http.cancel({requestIds:t.id},(function(t){t.pos;var n,o=t.response;t.requestId,o&&(null==e||null===(n=e.onSuccess)||void 0===n||n.call(e,o))}),(function(t){e.onError&&e.onError(t)}))}(e)}}}function Fo(e,t){var n=w(e);if(I){var o=I(e);t&&(o=l(o).call(o,(function(t){return D(e,t).enumerable}))),n.push.apply(n,o)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n,o,a=null!=arguments[t]?arguments[t]:{};t%2?s(n=Fo(Object(a),!0)).call(n,(function(t){b(e,t,a[t])})):S?C(e,S(a)):s(o=Fo(Object(a))).call(o,(function(t){E(e,t,D(a,t))}))}return e}var Uo=ue.t,Ko=function(e){f(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!k)return!1;if(k.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(k(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=N(e);if(t){var a=N(this).constructor;n=k(o,arguments,a)}else n=o.apply(this,arguments);return _(this,n)}}(n);function n(){var e,i,r,c;h(this,n);for(var d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];return c=t.call.apply(t,x(e=[this]).call(e,p)),b(O(c),"state",{visible:!1,disabled:!1,mergedFileList:c.props.fileList||[],uid:de(),isNative:u(i=navigator.userAgent).call(i,"m5shell")>=0,isSFNative:u(r=navigator.userAgent).call(r,"sf-service-mobile")>-1}),b(O(c),"fileInput",o.createRef()),b(O(c),"reqs",{}),b(O(c),"processFile",function(){var e=pe(fe.mark((function e(t,n){var o,a,i,r,l,s,u,d,p,f;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.props.beforeUpload,a=c.state.isSFNative,i=t,!o){e.next=15;break}return e.prev=4,e.next=7,o(t,n);case 7:i=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),i=!1;case 13:if(!1!==i){e.next=15;break}return e.abrupt("return",{origin:t,parsedFile:null,action:null,data:null});case 15:if(r=c.props.action,l=r||"","function"!=typeof(s=c.props.data)){e.next=24;break}return e.next=21,s(t);case 21:u=e.sent,e.next=25;break;case 24:u=s;case 25:return d="object"!==L(i)&&"string"!=typeof i||!i?t:i,p=d instanceof File||a?d:new File([d],(null==t?void 0:t.name)||"",{type:t.type}),(f=p).uid=t.uid,f.fileSize=t.size,e.abrupt("return",{origin:t,data:u,parsedFile:f,action:l});case 31:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}()),b(O(c),"reset",(function(){c.fileInput.current&&(c.fileInput.current.value=""),c.setState({uid:de()})})),b(O(c),"setDisabled",(function(e){c.setState({disabled:e})})),b(O(c),"handleChange",function(){var e=pe(fe.mark((function e(t){var n,o,a,i;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.state.isNative,c.setDisabled(!0),o=n?t:t.target.files,a=J(o),i=m(a).call(a,(function(e){var t;return(t=n?{path:e.path,name:e.filename,type:e.mimeType,size:e.size}:e).uid=de(),c.processFile(t,a)})),he.all(i).then((function(e){var t,n,o,a;null===(t=(n=c).onBatchStart)||void 0===t||t.call(n,m(o=l(e).call(e,(function(e){return e.parsedFile}))).call(o,(function(e){return{file:e.origin,parsedFile:e.parsedFile}}))),s(a=l(e).call(e,(function(e){return null!==e.parsedFile}))).call(a,(function(e){c.post(e)})),c.reset()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b(O(c),"onBatchStart",(function(e){var t=e,n=m(t).call(t,(function(e){return me(e.file)})),o=c.state,a=o.mergedFileList,i=o.isSFNative,r=J(a);s(n).call(n,(function(e){r=ve(e,r)})),s(n).call(n,(function(e,n){var o=e;if(t[n].parsedFile)e.status="uploading";else{var a=e.originFileObj,l=new Blob([a],{type:a.type});i&&(l=a),l.uid=e.uid,o=l}c.onInternalChange(o,r)}))})),b(O(c),"onProgress",(function(e,t){var n=c.state.mergedFileList;if(ge(t,n)){var o=me(t);o.status="uploading",o.percent=e.percent;var a=ve(o,n);c.onInternalChange(o,a,e)}})),b(O(c),"post",(function(e){var t=e.data,n=e.origin,o=e.action,a=e.parsedFile,i=c.props,r=i.name,l=i.method,s=i.withCredentials,u=i.headers,d=i.customRequest,p=c.state.isNative,f=n.uid,h=d||(p?Lo:Oo),m={action:o,filename:r,withCredentials:s,data:t,file:a,fileList:[{filepath:a.name,requestId:a.uid}],headers:u,method:l||"post",onProgress:function(e){var t,n;null===(t=(n=c).onProgress)||void 0===t||t.call(n,e,a)},onSuccess:function(e){var t,n;null===(t=(n=c).onSuccess)||void 0===t||t.call(n,e,a),delete c.reqs[f]},onError:function(e,t){var n,o;null===(n=(o=c).onError)||void 0===n||n.call(o,e,t,a),delete c.reqs[f]}};p?(m.fileList=[{filepath:n.path,requestId:a.uid}],h(m)):(m.file=a,h(m))})),b(O(c),"onError",(function(e,t,n){var o=c.state.mergedFileList;if(ge(n,o)){var a=me(n);a.error=e,a.response=t,a.status="error";var i=ve(a,o);c.onInternalChange(a,i)}})),b(O(c),"onSuccess",(function(e,t){try{"string"==typeof e&&(e=JSON.parse(e))}catch(e){}var n=c.state.mergedFileList;if(ge(t,n)){var o=me(t);o.status="done",o.percent=100,o.response=e;var a=ve(o,n);c.onInternalChange(o,a)}})),b(O(c),"onInternalChange",(function(e,t,n){var o=J(t),a=c.props,i=a.maxCount,r=a.onChange;1===i?o=R(o).call(o,-1):i&&(o=R(o).call(o,0,i)),c.setState({mergedFileList:J(o)});var l={file:e,fileList:o};n&&(l.event=n),c.setDisabled(!1),null==r||r(l)})),b(O(c),"handleRemove",(function(e){var t,n=c.props.onRemove,o=c.state.mergedFileList;he.resolve("function"==typeof n?n(e):n).then((function(n){if(!1!==n){var a=be(e,o);a&&(t=zo(zo({},e),{},{status:"removed"}),null==o||s(o).call(o,(function(e){var n=void 0!==t.uid?"uid":"name";e[n]!==t[n]||we(e)||(e.status="removed")})),c.abort(t),c.onInternalChange(t,a))}}))})),b(O(c),"abort",(function(e){if(e){var t=e.uid?e.uid:e;c.reqs[t]&&c.reqs[t].abort&&c.reqs[t].abort(),delete c.reqs[t]}else{var n;s(n=w(c.reqs)).call(n,(function(e){c.reqs[e]&&c.reqs[e].abort&&c.reqs[e].abort(),delete c.reqs[e]}))}})),b(O(c),"onAbort",(function(e){c.abort(e);var t=c.state.mergedFileList;if(ge(e,t)){var n=me(e.originFileObj);n.status="abort",n.percent=e.percent;var o=ve(n,t);c.onInternalChange(n,o,{percent:e.percent})}})),b(O(c),"onReUpload",(function(e){"abort"===e.status?(c.handleRemove(e),c.handleChange({target:{files:[e.originFileObj]}})):(c.abort(e),c.handleRemove(e),c.handleChange({target:{files:[e.originFileObj]}}))})),b(O(c),"handleClick",(function(){var e,t,n;c.props.disabled||null!==(e=c.props)&&void 0!==e&&e.renderInDesign||null===(t=c.fileInput)||void 0===t||null===(n=t.current)||void 0===n||n.click()})),b(O(c),"mobileClick",(function(){if(!c.props.disabled){var e=c.props;e.fileType;var t=e.accept,n=e.capture,o=e.multiple;"image/*"!==t||"camera"!==n?"image/*"!==t?window.jsSdk.media.chooseFile({maxSelectNum:o?9:1},(function(e){c.handleChange(e)}),(function(){console.error("选择文件失败")})):c.chooseMedia():c.takePicture()}})),b(O(c),"takePicture",(function(){window.jsSdk.media.takePicture({crop:c.props.isEdit},(function(e){var t;c.handleChange(J(m(t=[e]).call(t,(function(e){return zo(zo({},e),{},{path:(null==e?void 0:e.filePath)||(null==e?void 0:e.path)})}))))}),(function(){console.error("选择图片失败")}))})),b(O(c),"chooseMedia",(function(){var e=c.props.multiple;window.jsSdk.media.chooseMedia({type:"image",maxSelectNum:e?9:1,showCamera:!0,crop:c.props.isEdit},(function(e){c.handleChange(e)}),(function(){console.error("选择图片失败")}))})),b(O(c),"renderImgUpload",(function(){var e=c.props.disabled;return o.createElement("div",{className:T("upload-wrap",e?"disabled":"")},o.createElement("div",{className:"upload"},o.createElement(a,{name:"LinedPlus",style:{fontSize:"16px"}}),o.createElement("div",{className:"upload-text"},Uo({k:"common.mui.upload.pictrue.text",d:"上传附件"}))))})),b(O(c),"renderUploadList",(function(){var e=c.props,t=e.fileType,n=e.maxCount,a=e.lines,i=void 0===a?"inset":a,r=e.showSize,l=e.appName,s=e.showPreview,u=void 0===s||s,d=e.showDownload,p=void 0===d||d,f=e.showRemove,h=void 0===f||f,m=e.disabledRemove,v=e.disabledDownload,g=e.disabledPreview,b=e.onChangeProps,w=e.showUploadBtn,y=c.state,x=y.mergedFileList,E=y.isNative,S=c.props.children?null:n?"image"===t&&n>x.length&&o.cloneElement(c.renderImgUpload(),{onClick:E?c.mobileClick:c.handleClick}):"image"===t&&o.cloneElement(c.renderImgUpload(),{onClick:E?c.mobileClick:c.handleClick});return o.createElement(No,{fileType:t,fileList:x,lines:i,showSize:r,appName:l,onAbort:c.onAbort,onRemove:c.handleRemove,onReUpload:c.onReUpload,showUploadList:c.props.showUploadList,showPreview:u,showDownload:p,showRemove:h,disabledDownload:v,disabledPreview:g,disabledRemove:m,onChange:b,size:c.props.size,readonlyFontSize:c.props.readonlyFontSize},w?S:null)})),c}return g(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t;this.setState({mergedFileList:l(t=e.fileList).call(t,(function(e){return"remove"!==e.status}))})}},{key:"render",value:function(){var e=this.props,t=e.multiple,n=e.id,a=e.accept;e.fileType;var i=e.capture,r=e.disabled,l=this.state,s=l.isNative;return l.visible,o.createElement(o.Fragment,null,o.createElement("input",{id:n,accept:a,multiple:t,ref:this.fileInput,type:"file",onChange:this.handleChange,style:{display:"none"},capture:i}),this.props.children&&o.createElement("div",{className:"spin",onClick:s?this.mobileClick:this.handleClick},o.cloneElement(this.props.children,{disabled:r})),this.renderUploadList())}}]),n}(o.Component);function Bo(e,t){var n=w(e);if(I){var o=I(e);t&&(o=l(o).call(o,(function(t){return D(e,t).enumerable}))),n.push.apply(n,o)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n,o,a=null!=arguments[t]?arguments[t]:{};t%2?s(n=Bo(Object(a),!0)).call(n,(function(t){b(e,t,a[t])})):S?C(e,S(a)):s(o=Bo(Object(a))).call(o,(function(t){E(e,t,D(a,t))}))}return e}b(Ko,"defaultProps",{name:"file",fileType:"file",showUploadList:!0});var Xo=ue.t;e("default",(function(e){var t,n,i=e.fileList,r=e.appName,c=e.isPublic,d=void 0!==c&&c,p=e.metadata,f=void 0===p?"":p,h=e.fileType,v=e.maxCount,g=e.method,b=void 0===g?"POST":g,w=e.quality,y=void 0===w?.3:w,E=e.isCompress,S=void 0===E||E,C=e.defaultFileList,D=void 0===C?[]:C,k=e.isSaveFile,N=void 0===k||k,_=e.headerData,T=e.multiple,I=void 0===T||T,P=e.customRequest,A=e.showLoading,R=void 0!==A&&A;e.fileMaxSize,e.size;var O=e.showUploadBtn,L=void 0===O||O;e.showDownload,e.showPreview,e.showRemove,e.disabledUploadBtn;var U=e.disabledRemove;e.disabledDownload,e.disabledPreview;var K=["png","jpg","jpeg","bmp","gif","pic"],B=u(t=navigator.userAgent).call(t,"m5shell")>=0;u(n=navigator.userAgent).call(n,"sf-service-mobile");var j=M.exports.useState(!1),X=ee(j,2),q=X[0];X[1];var Y=M.exports.useState(),H=ee(Y,2),$=H[0];H[1];var W=o.useState(),V=ee(W,2),Z=V[0];V[1];var te=M.exports.useState([]),ne=ee(te,2),oe=ne[0],ae=ne[1],re=o.useState(),se=ee(re,2),ce=se[0];se[1];var ue=M.exports.useState(b||"put"),de=ee(ue,2),me=de[0];de[1];var ve=M.exports.useRef([]),ge=M.exports.useRef([]),be=M.exports.useRef([]),we=M.exports.useRef([]),_e=M.exports.useState({}),Te=ee(_e,2),Ie=Te[0],Pe=Te[1];M.exports.useEffect((function(){if((null==i?void 0:i.length)>0){var e,t,n=i?G(e=m(t=l(i).call(i,(function(e){return null==e?void 0:e.storageKey}))).call(t,(function(e){return jo(jo({},e),{},{status:"done"})}))).call(e,(function(e,t){return(null==e?void 0:e.sortIndex)-(null==t?void 0:t.sortIndex)})):[];ae(n),be.current=n}else ae([]),be.current=[]}),[F(i)]),M.exports.useEffect((function(){D.length&&Le(),Ae()}),[]);var Ae=function(){var e=pe(fe.mark((function e(t){var n;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=localStorage.getItem("fileConfig"))){e.next=6;break}return Pe(JSON.parse(n)),e.abrupt("return",JSON.parse(n));case 6:return e.next=8,Re(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var t=pe(fe.mark((function t(n){var o;return fe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ye({appName:e.appName});case 2:if(!(o=t.sent).content){t.next=11;break}return Pe(o.content),localStorage.setItem("fileConfig",F(o.content)),t.next=8,null==n?void 0:n(o.content);case 8:return t.abrupt("return",o.content);case 11:return t.abrupt("return",null);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Me=function(){var e=pe(fe.mark((function e(t,n){var o,a,i,l,s,c,u,p,h;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null,"backend"!==(null==(a=n||Ie)?void 0:a.uploadMode)){e.next=8;break}l=location.protocol+window.__SY_STATIC_API_ORIGIN__,o={content:{action:x(i="".concat(l,"/")).call(i,r,"/file/upload"),method:"post",headers:"",data:"",storageKey:""}},Oe(o,t,a),e.next=33;break;case 8:if(!N){e.next=26;break}return e.prev=9,e.next=12,bo({appName:r,fileName:t.name,isPublic:d,metadata:f,headerData:_});case 12:o=e.sent,Oe(o,t,a),e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(9),null===e.t0||void 0===e.t0||!Q(s=e.t0.message).call(s,"后端中转模式时无需签名")){e.next=23;break}return e.next=21,Re((function(e){Me(t,e)}));case 21:e.next=24;break;case 23:z.show({content:null===e.t0||void 0===e.t0?void 0:e.t0.message,icon:"fail",type:"fail"});case 24:e.next=33;break;case 26:return e.next=28,yo({appName:r,fileName:t.name,isPublic:d,metadata:f,headerData:_});case 28:c=e.sent,u=c.status,p=c.data,h=c.message,0===u?Oe(p,t,a):ie.show({content:h});case 33:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t,n){return e.apply(this,arguments)}}(),Oe=function(e,t,n){var o,a,i,l,s,c,u,p=xe("".concat(null==e||null===(o=e.content)||void 0===o?void 0:o.host));ve.current=x(a=[]).call(a,J(ve.current),[{file:t,action:"backend"===(null==n?void 0:n.uploadMode)?null==e||null===(i=e.content)||void 0===i?void 0:i.action:p,method:null==e||null===(l=e.content)||void 0===l?void 0:l.method.toLowerCase(),headers:null==e||null===(s=e.content)||void 0===s?void 0:s.headerData,data:null==e||null===(c=e.content)||void 0===c?void 0:c.formData,storageKey:null==e||null===(u=e.content)||void 0===u?void 0:u.storageKey,metadata:f,isPublic:d,appName:r,qrCodeUploadToken:_}])},Le=function(){var e=pe(fe.mark((function e(){var t,n,o;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m(D).call(D,(function(e){return e.storageKey})),e.next=3,Ee({appName:r,storageKeys:t});case 3:null!=(n=e.sent)&&n.content&&(o=m(D).call(D,(function(e){var t=null==n?void 0:n.content;if(e.storageKey in t){var o=xe("".concat(t[e.storageKey]));return jo(jo({},e),{},{url:o})}})),ae(o));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(e){var t=e.name.split("."),n=t[t.length-1];return!!Q(K).call(K,n.toLowerCase())},ze=function(){var t=pe(fe.mark((function t(n,o){var a,i,r,l;return fe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Se(n,e),r=x(a=[]).call(a,J(ge.current),[n]),ge.current=r,!0!==i){t.next=7;break}return t.abrupt("return",!1);case 7:if(!i){t.next=10;break}return ge.current.length===o.length&&(ge.current=[],z.show({content:i,icon:"warning",type:"warning"})),t.abrupt("return",!1);case 10:if(l=be.current.length,!(v&&v>1&&(be.current.length+1>v||o.length>v||l+o.length>v))){t.next=14;break}return ge.current.length===o.length&&(ge.current=[],ie.show({icon:"fail",content:Xo({k:"common.ui.upload.maxCount",d:"限制数量为".concat(v,"！"),v:["".concat(v)]})})),t.abrupt("return",!1);case 14:if(!(o.length>20)){t.next=20;break}if(r.length!==o.length){t.next=19;break}return ie.show({content:Xo({k:"common.ui.upload.multiple.maxCount",d:"一次上传最多选20个文件！",v:["20"]})}),ge.current=[],t.abrupt("return",!1);case 19:return t.abrupt("return",!1);case 20:return t.abrupt("return",new he(function(){var t=pe(fe.mark((function t(o,a){return fe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.beforeUpload||!1!==e.beforeUpload(n,oe)){t.next=3;break}return ie.clear(),t.abrupt("return",a());case 3:if(!Fe(n)||!S||B){t.next=7;break}Ue(n,o),t.next=10;break;case 7:return t.next=9,Me(n);case 9:o(n);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 21:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Ue=function(){var e=pe(fe.mark((function e(t,n){var o,a;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new FileReader,a=new Image,o.readAsDataURL(t),o.onload=function(e){a.src=e.target.result},a.onload=function(){var e,o=document.createElement("canvas"),i=o.getContext("2d"),r=a.width,l=a.height;o.width=r,o.height=l,null!=t&&null!==(e=t.name)&&void 0!==e&&Ce(e).call(e,".png")&&(o.width=.5*r,o.height=.5*l),i.clearRect(0,0,o.width,o.height),i.drawImage(a,0,0,o.width,o.height),o.toBlob(function(){var e=pe(fe.mark((function e(o){var a,i;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new File([o],t.name,{type:t.type}),(i=new File([a],t.name,{type:t.type})).uid=t.uid,e.next=5,Me(i);case 5:n(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.type,y)};case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ke=function(){var t=pe(fe.mark((function t(n,o,a){var r,s,c,u,d,p,f;return fe.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne({appName:e.appName,storageKeys:n.storageKey[0]});case 2:(r=t.sent).content&&(d=xe("".concat(r.content)),p=l(s=be.current).call(s,(function(e){return"done"===e.status})),f=x(c=[]).call(c,J(p),[{name:n.fileName[0],status:o,url:d,uid:n.fileId[0],storageKey:n.storageKey[0],size:n.size[0],id:null==n||null===(u=n.id)||void 0===u?void 0:u[0],mimeType:n.mimeType[0],createTime:(new Date).getTime().toString(),createUserName:null==n?void 0:n.createUserName}]),be.current=De(f),a===ve.current.length-1&&(ke(i)&&ae(be.current),e.onChange&&e.onChange({file:n,fileList:J(be.current)}),ve.current=[],ge.current=[],we.current=[]));case 4:case"end":return t.stop()}}),t)})));return function(e,n,o){return t.apply(this,arguments)}}(),Be=function(){var e=pe(fe.mark((function e(t,n,o){var a,i,r,l,s,c;return fe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,i=t.fileName[0],r=t.size[0],l=t.md5[0],s=t.mimeType[0],c=t.storageKey[0],e.next=8,Eo({appName:n,createTime:a,fileName:i,fileSize:r,isPublic:o,md5:l,metadata:f,mimeType:s,storageKey:c});case 8:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),je={action:$,data:Z,onRemove:function(t,n){if(U)ie.show({content:Xo({k:"common.ui.upload.disabled.delete",d:"删除操作被禁用！"}),icon:o.createElement(a,{name:"Linedtermination"})});else if(Array.isArray(t)){var i,r=l(oe).call(oe,(function(e){return-1===(null==t?void 0:le(t).call(t,(function(t){return(null==e?void 0:e.storageKey)===(null==t?void 0:t.storageKey)})))}));if(!1===(null==e||null===(i=e.onRemove)||void 0===i?void 0:i.call(e,null==t?void 0:t[0],r)))return;ae(r),be.current=r}else{var s,c=l(oe).call(oe,(function(e){return(null==e?void 0:e.storageKey)!==(null==t?void 0:t.storageKey)}));if(!1===(null==e||null===(s=e.onRemove)||void 0===s?void 0:s.call(e,t,c)))return;ae(c),be.current=c}},onChange:function(t){var n=t.file,o=t.fileList,a=n.status,i=n.response;if("done"===a){var c,u,p,f=jo({fileName:[n.name],uid:[n.uid],fileId:[n.uid],storageKey:[l(c=ve.current).call(c,(function(e){return e.file.uid===n.uid}))[0].storageKey],mimeType:[n.type],size:B?["".concat(n.fileSize)]:["".concat(n.size)]},i);if(!N){var h,m;ie.clear();var v,g=l(h=be.current).call(h,(function(e){return"done"===e.status})),b=x(m=[]).call(m,J(g),[jo(jo({},f),{},{name:f.fileName[0],status:a,storageKey:f.storageKey[0],uid:f.uid[0],size:f.size[0],mimeType:null==f?void 0:f.mimeType[0]})]);return be.current=b,void(o.length===be.current.length?(ae(be.current),ve.current=[],ge.current=[],null==e||null===(v=e.onChange)||void 0===v||v.call(e,{file:f,fileList:be.current})):ae(o))}we.current=x(u=[]).call(u,J(we.current),[f]),we.current.length===ve.current.length&&s(p=we.current).call(p,(function(e,t){"backend"!==(null==Ie?void 0:Ie.uploadMode)&&Be(e,r,d),Ke(e,"done",t)})),ie.clear()}else if("error"===a){var w,y;ie.clear(),console.error("上传失败，后端文件服务异常"),null!=n&&n.error?z.show({content:null==n||null===(y=n.error)||void 0===y?void 0:y.message,icon:"fail",type:"fail"}):z.show({content:Xo({k:"common.ui.upload.uploadErr",d:"上传失败，后端文件服务异常"}),icon:"fail",type:"fail"}),null==e||null===(w=e.onError)||void 0===w||w.call(e),ae(be.current),ve.current=[],ge.current=[],we.current=[]}else"uploading"===a&&ae(oe)},beforeUpload:ze,onChangeProps:e.onChange,fileList:oe,fileType:h,maxCount:v,method:me,multiple:I,headers:ce,customRequest:P||function(e){Ro(e,ve.current,R)}};return o.createElement(o.Fragment,null,o.createElement(Ko,jo(jo(jo({},e),je),{},{disabled:q||e.disabled,multiple:1!==v&&I}),L?e.children:null))}))}}}));
